<!DOCTYPE html><html><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="description" content="kindquiet"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="alternative" href="/atom.xml" title="kindquiet素食勤俭敬老孝慈" type="application/atom+xml"><link rel="icon" href="/favicon.ico"><title>kindquiet素食勤俭敬老孝慈</title><meta name="keywords" content="centos,素食"><meta name="description" content="kindquiet素食勤俭敬老孝慈"><script>var _hmt = _hmt || [];(function() {  var hm = document.createElement("script");  hm.src = "//hm.baidu.com/hm.js?33ec0e4a308e2f174e68f15c700d8b5d";  var s = document.getElementsByTagName("script")[0];   s.parentNode.insertBefore(hm, s);})();</script><link rel="stylesheet" href="/css/style.css" type="text/css"><!--[if lt IE 9]><script>(function(a,b){a="abbr article aside audio bdi canvas data datalist details dialog figcaption figure footer header hgroup main mark meter nav output progress section summary template time video".split(" ");for(b=a.length-1;b>=0;b--)document.createElement(a[b])})()</script><![endif]--></head><body><header class="site-head"><div class="inner"><h1 class="site-title u-fl"><a href="/">kindquiet素食勤俭敬老孝慈</a></h1><nav class="site-nav u-fr"><ul class="site-nav__list"><li class="site-nav__item"><a href="/" class="site-nav__link">Home</a></li><li class="site-nav__item"><a href="/archives" class="site-nav__link">Archives</a></li></ul></nav></div></header><section class="site-content"><main class="site-main"><article class="post"><header class="post__head"><time datetime="2009-04-24T07:56:13.000Z" class="post__time">四月 24, 2009</time><h1 class="post__title"><a href="/2009/04/24/w/e5-9c-a8-e5-ae-b6-e4-ba-ba-e8-83-bd-e8-ae-ba-e5-83-a7-e4-ba-8b-e5-90-97-ef-bc-9f/">在家人能论僧事吗？</a></h1></header><div class="post__main"><p>　　我们首先应当承认，中国的佛教，尤其是正在近世以来，根本是谈不上律制的。所以僧人少有如律而行的，俗人（在家佛子）也就更不懂得律制了。</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 　　僧人多不崇律，生活仪节不能没有失措之处；俗人不知律规，见到僧人的不顺眼者，往往加以指谪。甚至形成僧人不谈僧制僧规，僧制僧规的讨论，竟然落到了俗人的文字与言谈之中。说起来，实在是一件非常痛心的事！&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 　　当然，俗人之会讨论僧制，指谪僧仪，责任应由我们僧人来负，俗人是无辜的。因为俗人皆是僧人弟子，弟子批评其师，岂非师教之失败？俗人不知道以其俗人的身分来论究僧制，是不合佛制的行为，所以他们出乎爱护教誉的热忱，来批评僧人的生活，是无可责斥的。不过，我想在此指出，俗人批评僧事，仍是绝对的罪过，即使此一罪过，应由僧人分担。（《优婆塞戒经》卷三&lt;摄取品&gt;中说：宁受恶戒，一日中断无量命根，终不养畜弊恶弟子，不能调伏。)在我国的律典中，没有一部是允许俗人来批评僧事的，特别是大乘菩萨戒，不要说是批评僧事，即使僧俗四众弟子中的任何一人犯了过失，也不应无拘束地广肆批评，否则便犯了《梵网经》重戒第六条「说四众过戒」。在泰国，虽然鼓励俗人研究比丘戒，但是俗人绝对不敢论涉僧制，我想泰国佛教之允许俗人看僧律，用意当在使得俗人更能了解佛制的比丘生活，而对僧人更能发出无上的崇敬之心。当俗人知道了律制之后，自也不敢甘冒犯过的罪愆，而来抨击僧人的律仪了。&nbsp;&nbsp; &nbsp;</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 　　根据律制，佛弟子的事，应由僧团的会议来共同解决，比丘犯了戒，轻则向一位清净比丘悔过，中则向二个以上清净比丘悔过，次重则在二十位清净比丘中出罪，最重则失戒体，逐出僧团之外。菩萨戒犯轻罪则对一比丘悔过，中罪则对三比丘悔过，重罪则失戒体，应当在佛菩萨像前忏悔，得到了好相&mdash;&mdash;见光见华，见佛菩萨来手摩其顶之后，方可允许重受。五戒弟子犯了戒，也是分为三等：上罪不可悔，中罪可悔，下罪可悔。</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 　　佛弟子犯戒，绝对不许大肆声张，逢人便说。但是仍有处理的途径，犯戒者如能自行发露，在清净比丘前至诚忏侮，当然是最好。如果犯戒者自已已将犯戒的事情忘了，或者虽未忘记，仍不坦白发露，那时可由有德资深的比丘，在集会之中，当众为之举罪，逼他发露忏悔，以求僧团的清净。如果虽遭举罪之事证俱在，而犹不肯认罪者，可由僧团会议，公推一位清净的有德比丘，去向施主宣布他的罪过，以期断绝他的信施，使他就范忏悔。可见，虽然比丘与比丘之间，也不得随意宣说他人的过失，何况俗人能够议论僧事？&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 　 　但是，俗人对于犯戒的僧人，并非没有说话的机会，唯其须是最最亲善的人，以私人的关系，密下为之劝告，终不得发诸议论而笔诸文字。&nbsp;&nbsp; &nbsp;</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 　　还有一个规矩，那就是举罪与忏罪的问题。佛弟子共分僧俗大小的七众，僧人可举俗人之罪，并可受俗人的悔过，俗人则不得举僧人之罪，亦不得受僧人的悔过；大众（比丘与比丘尼）可举小众（式叉摩尼与沙弥沙弥尼）之罪，并可受小众的悔过，小众不得举大众之罪，亦不得受大众的悔过；比丘可举其下六众之罪，并得受其悔过，其下六众不得举比丘之罪，亦不得受比丘悔过。即在比丘之中，戒腊在五夏之前，不得为师，也不得离师&mdash;&mdash;以其尚未通晓戒律的轻重与持犯，因此，比丘虽已超过五夏的戒腊，乃至已届百岁高龄，如其不学无知，不明戒律的轻重持犯，仍然不得举人之罪。准此而言，俗人而来议论僧事，而来讨论批评僧人的威仪作法，自为佛制之所严禁的事了。&nbsp;&nbsp; &nbsp;</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 　　这不是佛陀制戒包庇僧人，实在是未届其位而不识其境的缘故。</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 佛弟子的七众之中以比丘的位置最高，戒律之中，也以比丘及比丘尼律最繁，即使身为比丘，潜心于律制的研究，也非十年八年的工夫所能穷究透彻，何况是一介俗人，单凭主观眼光的好坏，而来批评僧事呢？正像一个国家的法律，只有律师懂得较多，但至于解释宪法，又非由大法官来专任不可了。如果下一个譬喻，俗人之论僧事者，则似小学的蒙童而去评阅博士的论文，试问：那能评阅出什么名堂来呢？&nbsp;&nbsp; &nbsp;</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 　　我不怪今时的俗人议论僧事，所谓「不知者不罪」，因为那是出于他们由于「不知」而产生的错误。同时这一错误的产生，多半还是出于爱护佛教的热忱。但我希望我的这篇文字，能起一点说明的作用，能使俗人最低限度不再不知高下地批评僧事。诚然，最要紧的，还要靠我们身为僧人的人，大家都能尊重律制、学习律制，并且尽可能地遵行律制。否则，以谤止谤，固然不对；实则不善而又欲人无谤者，也是不公道的。即使在俗的佛子们，为了持戒而不谤僧，却也无法禁止非佛弟子乃至外道徒众的借机破坏！</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 　　如今，我国的佛教，尤其在台湾，根本少有遵行僧团制度的约束与制衡，要想事事如律，自也无法办到。但是我们如能多懂一点律制的知识，至少也可有些警策的效用，至少在我们犯了过失之后（戒是条条都有犯的可能的&mdash;&mdash;人非圣贤，孰能无过？未得定共戒、道共戒之前的凡夫，犯戒是难免的，特别是威仪戒），也会生起惭愧之心，无法求得清净僧中悔过，自在佛前恳切忏悔，小罪也可忏除的。</p>
<p>&nbsp;&nbsp; &nbsp;</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 　&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 　圣严法师《觉世》一九二期</p>
<p><a href="http://qzone.qq.com/blog/48966408-1231352061" target="_blank" rel="external">http://qzone.qq.com/blog/48966408-1231352061</a></p>
</div><footer class="post__foot u-cf"><a href="/2009/04/24/w/e5-9c-a8-e5-ae-b6-e4-ba-ba-e8-83-bd-e8-ae-ba-e5-83-a7-e4-ba-8b-e5-90-97-ef-bc-9f/#comments" class="post__foot-link u-fr">评论</a></footer></article><article class="post"><header class="post__head"><time datetime="2009-04-24T07:44:06.000Z" class="post__time">四月 24, 2009</time><h1 class="post__title"><a href="/2009/04/24/w/e5-b0-91-e7-9d-a1-e7-9a-84-e5-a5-bd-e5-a4-84/">少睡的好处</a></h1></header><div class="post__main"><p>贪睡虽不是什么罪恶事，佛教认为它是一种过失，一生中大好辰光都在昏睡中浪费了，所以佛说：&ldquo;咄咄为何睡，螺师蛤蚌类，一睡一千年，佛法不闻知&rdquo;。可为警惕。</p>
<p>大悲寺住持 妙祥法师</p>
<p>睡眠为四个小时。这个规定不是咱们僧团创造出来，佛在世的时候就规定了僧人四个小时的睡眠，我们能得到这个四个小时的睡眠时间这种修行方式是很殊胜的。这种睡眠四个小时是来源于《阿含经》。《阿含经》讲述佛当时领导的僧团是怎样修行的，其中睡眠就是四个小时。到十点锺，晚上都在讲法，晚上都是讲法的时间。</p>
<p>睡眠对我们来讲是五盖之一，财、色、名、食、睡，最后就是个睡。我们有时候很容易堕落睡眠里去，因为我们认为这个睡眠必须保证，医生也是这么讲：你身体需要，要保证睡眠，不要得官能症，最起码的不能睡八个小时，你得睡七个小时。甚至告诉你睡十个小时、十二个小时，就让你使劲睡。睡觉，我们在世间上不知道它的坏处，但知道睡过多了，你不起来去干活，没人干，你不去挣钱没有吃的，所以他就起来去做，但是睡眠也是多。</p>
<p>为什么睡眠不能过多？因为这个睡眠，当我们需要睡眠的时候，也就是休息状态，也就是你从睡到醒这一段时间是你的需要量，这是个需要量。当我们醒来的时候，你这个需要量已经满足了，它已经休息过了。再睡，那就是做梦，胡思乱想，天南海北，又飞又跑的，再醒了的时间，它就特别地疲劳，因为这个脑子的运动已经开始活跃了，不再休息，甚至有时候比白天还累。所以说，在修禅人，特别体清老和尚就告诉大家：你睡一觉就起来，睡醒就起来。他每天都是半夜起来，有时候就诵咒，就这么精进。他睡一觉就起来了，就不再睡了。</p>
<p>实际上我们睡四个小时就足够用了，为什么还困？是我们的习性在困，并不是我们身体需要。多睡，一个是多梦、疲劳，更主要的，欲漏，都在醒了以后再睡觉的这一过程，因为有了梦境，它就産生各种的色相，它就会导致欲漏了。我们修行知道：欲要不除，三界不可出。所以我们想除欲，必须从睡眠这块要下手，要少睡。睡眠能毁掉我们的清净心，也会破坏我们的禅定力，也会使我们没有智慧。睡眠多了，这害处很大。</p>
<p>过去佛在世不是讲过嘛，有一个尊者，因为一讲法他就困，一讲法就困，佛就呵斥他：一睡一千年，是蛤蚌类。就是说，这一睡就会睡到一千年去，这样的果报。这样的果报是什么样呢？也就是蛤蚌类。蛤蚌我们知道，生在海底的那些动物，一种一开一合的，中间有肉的就是蛤蚌。一睡一千年，这一千年都在昏沈之中。所以多睡会堕落畜生道，不是没有因果。说我睡觉无所谓的，还有人说我是睡仙，还有&ldquo;睡禅定&rdquo;，睡觉做禅定等等的，这都是自己在给自己讲一个很吸引人的童话来欺骗自己、来欺骗别人，这是不合适的。</p>
<p>我们知道睡眠的害处，睡眠会堕落；另外睡眠多了，可以耽误我们的修行，使我们正念提不起来。我们如果稍稍一贪睡的时候，那几个小时一会就过去了。睡四个小时也不大得劲，两点起来睡到六点，他也能睡。这四个小时，你知道要做多少事情？我们可以两点锺起来，跑香、坐禅、上殿、诵咒，四个小时完成很多的事情。要是这四个小时的时间你抓住了，这个成佛的机会就越来越大；如果你失去了，反而失去了成佛的机会。</p>
<p>那少睡，我们困不困呢？</p>
<p>从习惯来讲是困的，但是你真正少睡，它反而不困。你看今天两点锺起来，它很精神；你要三点钟起来，它就不精神；六点钟起来，它也不精神。说六点钟我挺精神。眼睛是瞪得挺大，但脑袋就象浆似的，它没法运转，糊涂，什么事也想不起来，另外分析问题，它也软弱。所以睡眠过多了没有智慧。睡眠多一个破坏了我们的修行，另外没有智慧，这也是一个大原因。我们早起来，四个小时一觉起来以后，反而不困，主要是个习惯性。现在大家可能基本上也好多了，因为大家到时候起来，两点钟起来打坐，很好的去做，也很清净、很清凉。但是，大家还有一个后备军，等到下了殿回到屋里，还可以躺下来一觉，发现有这样的人。这个不好。因为要多打坐、多诵咒，两点钟起来，起来以后就不要再贪睡了。有时候困怎么办？你打坐，慢慢地就把它调过来了。所以少睡并不困，多睡困。多睡没有智慧，脑袋昏沈。</p>
<p>到中午的时候，我们有时候吃完饭，这困劲就来了，特别年龄大的，这个困劲就特别强。这一段有的甚至你不眯上个三分五分、十分八分、或半个小时，它缓不过这个劲。因为食物进入胃肠以后，有时候脑袋缺血，会造成这个状态，一缺血它就要昏沈。我们怎么办来克服？就是我们中午要找事情做，吃完饭不要进屋，不要找床，在外面。</p>
<p>刚来大悲寺的时候，一到中午的时候，我就拿个小铁丝做条鈎子，去捡东西。那时候有沟，上沟里捡塑料布、捡个破东西，拿个口袋往里装，天天中午就干这些事。这里还有一个笑话。就是有一回我正在捡，来了几个拜佛的，就问我：&ldquo;你们那个住持师父在哪呢？我们找师父，上哪去找？&rdquo;我说那你上客堂。告诉他上客堂，他挺谢谢我。上客堂，客堂又给领回来了，告诉他在那头呢，说那个捡破烂的就是师父。这他还挺惊讶，惊讶以后，我在沟底下，他在沟上面就磕头了，挺感动，也没想到这个师父是个捡破烂的。</p>
<p>所以我们为了减少睡眠、不困，中午你可以去做户外活动，一个吸收空气，另外克服这个睡魔，另外呢，受人尊重。你看多受人尊重，你看你要去做了，没准他也能给你顶礼，这个是很好的事情。</p>
<p>少睡对我们的修行是一个抓紧时间、了脱生死的好因缘，别人修八个小时，你要修十个小时，那你就超越别人不止一倍两倍的问题了，因为你这里有一个努力的问题。因为这个努力可不是那一般人所能做到的，所以这个努力太珍贵了，了脱生死往往就在后面你是否再进一步努力的时候。你看你四个小时都克服了，但是你到中午又给它睡一觉，或是我找时间我再睡一觉，那就不行了。如果我们少睡，就给我们了脱生死创造了一个很好的机会和因素，给我们创造了这么大一个因缘，那是我们修行所想达到的。有时候我们根本费了很大劲都找不着，但是由于我们少睡，这个因缘它就来了，这么殊胜。</p>
<p>有的人可能担心：我睡少了，脑子糊涂，有时候记不住东西。是，这面记不住东西，但你少睡和努力以后，它有智慧，智慧慢慢从心里就生出来了。本来你想把一个事情做好，你睡得挺多，你不见得把事情做得很好；如果你能够减少睡眠，有时候你想达到的目标，没有费劲，你也没有去做过多的努力，它就会因缘成熟。因为精勤也就叫勇猛。文殊菩萨讲，勇猛就是智慧。我们减少睡眠就是勇猛，就是智慧。有时候我们从文字上、从经书上，甚至参学去，做了种种的努力，你不知道睡眠少了就是智慧。我们有时候捡到了西瓜，反而给扔了，认为它不是西瓜，我们再去找西瓜，再去找。所以我们有时候很可惜的。现在我们要是把这个宝贝抓住了，我们何必再去找呢，是不是？你想抓住这个西瓜，少睡就能抓住，多睡就抓不住了。</p>
<p>有的人认为：行，早晨两点钟起来，我也能起，晚睡我也能睡，只要你看不着，我就多睡一点。为什么？认为这些修行，是给师父修的，他不是给他自己修。他认为睡觉是自己应该得的，少睡是给师父少睡，所以叫师父知道：你知道我少睡就行了，剩下就是我的事，我就可以满足我的需要去多睡。完全是这么的想法。所以有时候找不到人了，一看哪去了？呆屋里睡觉呢。一招，不好意思，为什么不好意思？还说不出来，他心里可能埋怨：你看师父今天把我发现了，没躲好，应该躲好好才行，找个师父发现不了的地方就对了。通过这个我知道，他是给我修的，不是给他自己修的。我们应该有个主动性，要对睡眠生起厌烦心，因为它耽误事。虽然都是你的东西，也是你的自由，咱们虽然看不着你，你在看不着下你打开一个自由，这种自由也是害人。我们平时本来就不清醒，再多睡那就更糊涂了，我们减少睡眠是为了培养善根福德因缘，也同样为了早开悟。因为一个睡魔你都控制不了，你的定力就没法産生；你把睡魔要控制住了，我们定力必然要上一层楼。</p>
<p>比如上殿，有时候我也注意观察，有时候咱们看咱自己的人，上殿也老迷糊，晃荡晃荡，有时候也瞅着愁：你怎么上殿还困呢？但是和外来的一比，一看他这个劲头，他就不一样，他有个内在的定力在那块，那脸就透着那种定力。有一种什么呢？就是风暴来了，我能顶得住，有一股定力，一看这就不一样。你等到那睡眠挺多的，一天两天跟你俩靠靠，三天四天就靠不过你了，有时候靠不过就走了，就不行了。这是平时没有锻炼的关系，如果有了锻炼，我们面对困难就能顶得过去。想少睡不困，就是早起。比如说，书勇，有时候晚上十二点钟就起来、一点锺起来，他说他这一天不困，这就是早起的好处。你要晚起，他就不会这样的，你越晚起他困觉越大，你看他睡到那八点十点的，他照样的困，浪费时间。你看刚才讲的书勇，他早起反而不困，很精神。而且越是少睡，他心情越好。为什么心情好？他有定力，他有什么问题，他一下靠定力就把问题解决了，他没那么大烦恼。你看越多睡的人，胡思乱想，起来想来想去，他就烦恼了，烦恼多了，道修不下去了，道修不下去怎么办？就得往回转了，会退道的。多睡会退道。</p>
<p>所以这个睡觉也不是小事，是五盖之一，财、色、名、食、睡，你看看，它是地狱根。你想不下地狱，你就少睡；你要想下地狱，那你就多睡。睡得越多你下地狱越深，这根据是这么量的。我们平时看看自己是否能下地狱，你先量量你睡几个小时觉。有的人老睡，搁屋里老睡，有的借理由：我有病。所以有时候看大门这活我就不愿意叫谁干，就愿意叫女居士她们看，出家的不愿让他们去，去了睡多了以后就是麻烦事，以后剃度了到僧团里，他很难改过来。</p>
<p>大家以后要少睡，最好是不要在屋里，不要上床，在戒律来讲有那么一条。特别是高大广床那更不允许，实际上，床上都不允许你随便坐着。平时你想修行就远离床，这个不是不能克服，很好克服的，只要是有长期心，不怕累、困，慢慢就好了，这定力就增加出来了。佛在世讲一个罗汉，因为他老困老困的、老睡觉，佛呵斥他以后，最后他一精进一努力，眼睛瞎了，但是换来了天眼，是不是？这也是因为他不断地克服睡眠，少睡有定力，少睡有智慧。我们知道这个，我们就应该少睡。</p>
<p>少睡的好处基本说出来了，具体办法，我们说吃完饭做事情，得要活动一下，把它躲开，躲开了就不困了。另外多睡还有个害处，对身体不好，压迫肾脏，对五脏六腑都有个压迫现象，会导致身体各方面松弛和僵化，肌肉松弛，关节僵化，这都是害处。你要不信，你就试一下，你要躺个五个月、六个月的不怎么动弹，最后，原先你没躺之前，你走个十里二十里、几十里地都没问题，等你躺半年以后，你连三里五里都走不了。因为什么呢？就是肌肉松弛，没有力量，关节僵化，不能运动，迈不开了，另外呼气也软弱，心情更不好。种种的害处，都不能多睡。</p>
<p>如何调伏？我们应该向这个尊者学习，要勇猛。但是这勇猛也不好勇猛，现在有的人就不勇猛了，刚才已经听出不勇猛的信息，这就不好。我在这讲了，他还不勇猛，看来就是平时多睡的原因，平时要是少睡，这时候他就不能发出这样的信息了。你这个多理解，慢慢克服。</p>
<p><a href="http://user.qzone.qq.com/852661159/blog/1239942890" target="_blank" rel="external">http://user.qzone.qq.com/852661159/blog/1239942890</a></p>
</div><footer class="post__foot u-cf"><a href="/2009/04/24/w/e5-b0-91-e7-9d-a1-e7-9a-84-e5-a5-bd-e5-a4-84/#comments" class="post__foot-link u-fr">评论</a></footer></article><article class="post"><header class="post__head"><time datetime="2009-04-24T07:08:35.000Z" class="post__time">四月 24, 2009</time><h1 class="post__title"><a href="/2009/04/24/w/e4-bc-81-e4-b8-9a-e7-ba-a7-e7-bd-91-e7-ae-a1-e5-bc-80-e6-ba-90-e8-bd-af-e4-bb-b6nagios-e7-9b-91-e6-8e-a7windows-e8-bf-9c-e7-a8-8b-e6-9c-8d-e5-8a-a1-e5-99-a8/">企业级网管开源软件nagios 监控Windows远程服务器</a></h1></header><div class="post__main"><p>在nagios的libexec下有check_nt这个插件,它就是用来检查windows机器的服务的,其功能类似于上一章讲的check_nrpe.不过还需要搭配另外一个软件NSClient,它则类似于NRPE</p>
<p>&nbsp;,NSClient与nrpe最大的区别就是:</p>
<p>—被监控机上安装有nrpe,并且还有插件,最终的监控是由这些插件来进行的.当监控主机将监控请求发给nrpe后,nrpe调用插件来完成监控.—NSClient则不同,被监控机上只安装NSClient,没有任何的插件.当监控主机将监控请求发给NSClient后,NSClient直接完成监控,所有的监控是由NSClient完成的.</p>
<p>&nbsp;</p>
<p>安装NSClient</p>
<p>从</p>
<p><a href="http://sourceforge.net/projects/nscplus" target="_blank" rel="external">http://sourceforge.net/projects/nscplus</a></p>
<p>下载NSClient++-Win32-0.3.5.msi(或者NSClient++-x64-0.3.5.msi，64位机)，双击安装。</p>
<p>在开始-运行里面输入services.msc打开&rdquo;服务&rdquo;，启动服务:</p>
<p>NSClientpp</p>
<p>&nbsp;</p>
<p>编辑NSC.ini文件，</p>
<p>C:\Program Files\NSClient++</p>
<p>将 [modules]部分的所有模块前面的注释都去掉,除了CheckWMI.dll， RemoteConfiguration.dll，SysTray.dll。</p>
<p>在[Settings]部分设置’password’选项来设置密码,作用是在nagios连接过来时要求提供密码.这一步是可选的.</p>
<p>将[Settings]部分’allowed_hosts’选项的注释去掉,并且加上运行nagios的监控主机的IP.</p>
<p>allowed_hosts=127.0.0.1/32,172.16.8.153</p>
<p>以逗号相隔.这个地方是支持子网的,如果写成192.168.0.0/24则表示该子网内的所有机器都可以访问.如果这个地方是空白则表示所有的主机都可以连接上来.</p>
<p>[NSClient]的’port’选项取消注释,,这是NSClient的默认监听端口</p>
<p>port=12489</p>
<p>查看服务，在cmd里面执行netstat &ndash;an可以看到已经开始监听tcp的12489端口了。</p>
<p>防火墙也要打开tcp的12489端口,否则nagios检查此服务的时候会报socket 超时错误.</p>
<p>&nbsp;</p>
<p>监控主机的配置</p>
<p>在监控主机上做的就是:</p>
<p>1.安装监控windows的插件(已经默认安装了,check_nt)</p>
<p>2.定义命令</p>
<p>3.定义要监控的项目</p>
<p>&nbsp;</p>
<p>cd /usr/local/nagios/etc/servers</p>
<p>vi services.cfg</p>
<p>//这里只举一个例子</p>
<p>define service {</p>
<p>&nbsp;&nbsp;&nbsp; use remote-service</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; host_name&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; eblog</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; service_description&nbsp;&nbsp; CPULOAD</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; check_command&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; check_nt!CPULOAD! -l 5,80,95</p>
<p>}</p>
<p>如果NSClient设置了连接需要密码,则应写成如下格式</p>
<p>check_nt!CPULOAD!&nbsp; -s PASSWORD -l 5,80,95</p>
<p>可以通过以下指令测试设备响应是否正常</p>
<p>/usr/local/nagios/libexec/check_nt -H 主机IP -p 12489 -s 密码 -v UPTIME </p>
<p>&nbsp;</p>
</div><footer class="post__foot u-cf"><a href="/2009/04/24/w/e4-bc-81-e4-b8-9a-e7-ba-a7-e7-bd-91-e7-ae-a1-e5-bc-80-e6-ba-90-e8-bd-af-e4-bb-b6nagios-e7-9b-91-e6-8e-a7windows-e8-bf-9c-e7-a8-8b-e6-9c-8d-e5-8a-a1-e5-99-a8/#comments" class="post__foot-link u-fr">评论</a></footer></article><article class="post"><header class="post__head"><time datetime="2009-04-24T06:14:22.000Z" class="post__time">四月 24, 2009</time><h1 class="post__title"><a href="/2009/04/24/w/e4-bc-81-e4-b8-9a-e7-ba-a7-e7-bd-91-e7-ae-a1-e5-bc-80-e6-ba-90-e8-bd-af-e4-bb-b6nagios-e8-bf-9c-e7-a8-8b-e4-b8-bb-e6-9c-ba-e7-9a-84-e5-ae-89-e8-a3-85-e9-85-8d-e7-bd-ae/">企业级网管开源软件nagios远程主机的安装配置</a></h1></header><div class="post__main"><p>远程主机（被监控机）安装部分</p>
<h1 id="yum_install_openssl">yum install openssl</h1><p>rpm -ihv gd-devel-2.0.28-4.4E.1.i386.rpm</p>
<p>安装nagios-plugin</p>
<p>groupadd nagios</p>
<p>useradd nagios -g nagios -s /sbin/nologin</p>
<p>mkdir -p /usr/local/nagios</p>
<p>mkdir -p /usr/local/nagios/etc</p>
<p>tar zxf nagios-plugins-1.4.13.tar.gz -C /usr/local/src</p>
<p>cd /usr/local/src/nagios-plugins-1.4.13</p>
<p>./configure -prefix=/usr/local/nagios-plugins -enable-redhat-pthread-workaround</p>
<p>make -j6 &amp;&amp; make install</p>
<p>cp -a /usr/local/nagios-plugins/libexec /usr/local/nagios</p>
<h1 id="&ndash;enable-redhat-pthread-workaround_这个参数可以在出现checking_for_redhat_spopen_problem&hellip;_错误时使用">&ndash;enable-redhat-pthread-workaround 这个参数可以在出现checking for redhat spopen problem&hellip; 错误时使用</h1><p>安装nrpe(主要是使用check_nrpe模块)</p>
<p>tar zxf nrpe-2.12.tar.gz -C /usr/local/src</p>
<p>cd /usr/local/src/nrpe-2.12</p>
<p>./configure —enable-ssl —enable-command-args</p>
<p>make all &amp;&amp;make install</p>
<p>cp sample-config/nrpe.cfg /usr/local/nagios/etc</p>
<p>chown -R nagios.nagios /usr/local/nagios</p>
<p>vi /usr/local/nagios/etc/nrpe.cfg</p>
<p>添加修改</p>
<p>allowed_hosts=127.0.0.1,172.16.1.153,a.b.c.25</p>
<p>command[check_/]=/usr/local/nagios/libexec/check_disk -w 20% -c 10% -p /</p>
<p>command[check_swap]=/usr/local/nagios/libexec/check_swap -w 20% -c 10%</p>
<p>command[check_/var]=/usr/local/nagios/libexec/check_disk -w 20% -c 10% -p /var</p>
<p>command[check_/usr/local]=/usr/local/nagios/libexec/check_disk -w 20% -c 10% -p /usr/local</p>
<p>command[check_/data1]=/usr/local/nagios/libexec/check_disk -w 20% -c 10% -p /data1</p>
<p>command[check_/opt]=/usr/local/nagios/libexec/check_disk -w 20 -c 10 -p /opt</p>
<p>vi /etc/rc.local</p>
<p>echo &quot;/usr/local/nagios/bin/nrpe -c /usr/local/nagios/etc/nrpe.cfg -d&quot; &gt;&gt; /etc/rc.local</p>
<p>如果有防火墙也要开放tcp 5666</p>
<p>vi /etc/sysconfig/iptables</p>
<p>-A INPUT -s a.b.c.25 -p icmp -m icmp —icmp-type echo-request -m state —state NEW -j ACCEPT</p>
<p>-A INPUT -s a.b.c.25 -p tcp -m state —state NEW -m tcp —dport 5666 —tcp-flags SYN,RST,ACK SYN -j ACCEPT</p>
<p>启动nrpe，端口为5666</p>
<p>/usr/local/nagios/bin/nrpe -c /usr/local/nagios/etc/nrpe.cfg -d</p>
<p>/etc/init.d/iptables restart</p>
<p>服务器端（监控主机）测试:</p>
<p>/usr/local/nagios/libexec/check_nrpe -H a.b.c.57</p>
<p>服务器端（监控主机）的配置</p>
<p>cd /usr/local/nagios/etc/</p>
<p>mkdir servers/</p>
<p>vi hosts.cfg</p>
<h1 id="define_monitor&nbsp;_host">define monitor&nbsp; host</h1><p>define host{</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; name&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; idc-server&nbsp;&nbsp;&nbsp; ; The name of this host template</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; use&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; generic-host&nbsp;&nbsp;&nbsp; ; This template inherits other values from the generic-host template</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; check_period&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 24x7&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ; By default, Linux hosts are checked round the clock</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; max_check_attempts&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 10&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ; Check each Linux host 10 times (max)</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; check_command&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; check-host-alive ; Default command to check Linux hosts</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; notification_period&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; workhours&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ; Linux admins hate to be woken up, so we only notify during the day</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ; Note that the notification_period variable is being overridden from</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ; the value that is inherited from the generic-host template!</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; notification_interval&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 720&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ; Resend notification every 12 hours</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; notification_options&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; d,r&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ; Only send notifications for specific host states</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; contact_groups&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; admingroup&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ; Notifications get sent to the admins by default</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; register&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ; DONT REGISTER THIS DEFINITION - ITS NOT A REAL HOST, JUST A TEMPLATE!</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</p>
<h6 id="#">#</h6><h1 id="IDC_servers&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;">IDC servers&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</h1><h6 id="#-1">#</h6><p>//这里只举一个例子</p>
<p>define host {</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; use idc-server</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; host_name&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 57-185</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; alias&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; web veryi blog</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; address&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; a.b.c.57</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; parents&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;inet switch</p>
<p>}</p>
<p>vi hostgroups.cfg</p>
<p>//这里只举一个例子</p>
<p>define hostgroup {</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; hostgroup_name&nbsp; blog</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; alias&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; blog1 servers</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; members&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 50-178,11-139,46-174,47-175,48-176,54-182,57-185</p>
<p>}</p>
<p>vi services.cfg</p>
<p>define service{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; name&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; remote-service&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ; The name of this service template&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; use&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; generic-service&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ; Inherit default values from the generic-service definition</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; check_period&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 24x7&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ; The service can be checked at any time of the day</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; max_check_attempts&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 4&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ; Re-check the service up to 4 times in order to determine its final (hard) state</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; normal_check_interval&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 5&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ; Check the service every 5 minutes under normal conditions</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; retry_check_interval&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ; Re-check the service every minute until a hard state can be determined</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; contact_groups&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; sagroup&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ; Notifications get sent out to everyone in the ‘admins’ group</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; notification_options&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; c,r&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ; Send notifications about warning, unknown, critical, and recovery events</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; notification_interval&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 720&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ; Re-notify about service problems every 12 hours</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; notification_period&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 24x7&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ; Notifications can be sent out at any time</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; register&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ; DONT REGISTER THIS DEFINITION - ITS NOT A REAL SERVICE, JUST A TEMPLATE!</p>
<h1 id="&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;_check_command&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;_check-host-alive">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; check_command&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; check-host-alive</h1><h1 id="&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;_notification_options&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;_d,u,r">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; notification_options&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; d,u,r</h1><p>}</p>
<p>define service{</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; use&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; remote-service&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ; Name of service template to use</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; host_name&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; *,!localhost</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; service_description&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; PING</p>
<p>&nbsp;&nbsp;&nbsp; check_command&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; check_ping!100.0,20%!500.0,60%</p>
<p>}</p>
<p>//这里只举一个例子</p>
<p>define service {</p>
<p>&nbsp;&nbsp;&nbsp; use remote-service</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; host_name&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 57-185</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; service_description&nbsp;&nbsp; check_tcp 80</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; check_command&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; check_tcp!80</p>
<p>&nbsp;&nbsp;&nbsp; contact_groups&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; admingroup</p>
<p>}</p>
<p>define service {</p>
<p>&nbsp;&nbsp;&nbsp; use remote-service</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; host_name&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 57-185</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; service_description&nbsp;&nbsp; / Free Space</p>
<p>&nbsp;&nbsp;&nbsp; check<em>command&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; check_nrpe!check</em>/</p>
<p>&nbsp;&nbsp;&nbsp; contact_groups&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; admingroup</p>
<p>}</p>
<p>define service {</p>
<p>&nbsp;&nbsp;&nbsp; use remote-service</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; host_name&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 57-185</p>
<p>&nbsp;&nbsp;&nbsp; service_description&nbsp;&nbsp; CPU Load</p>
<p>&nbsp;&nbsp;&nbsp; check_command&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; check_nrpe!check_load</p>
<p>&nbsp;&nbsp;&nbsp; contact_groups&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; admingroup</p>
<p>}</p>
<p>define service {</p>
<p>&nbsp;&nbsp;&nbsp; use remote-service</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; host_name&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 57-185</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; service_description&nbsp;&nbsp; swap Free Space</p>
<p>&nbsp;&nbsp;&nbsp; check_command&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; check_nrpe!check_swap</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</p>
<p>vi servicegroups.cfg</p>
<p>//这里只举一个例子</p>
<p>define servicegroup{</p>
<p>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; servicegroup_name&nbsp;&nbsp;&nbsp; linux disks</p>
<p>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; alias&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; free disk Services</p>
<p>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; members&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; 37-165,/var Free Space,37-165,/opt&nbsp; Free Space,37-165,/data1 Free Space,37-165,/usr/local&nbsp; Free Space</p>
<p>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; }</p>
<p>进阶:</p>
<p>Nagios is able to determine whether the hosts you&rsquo;re monitoring are in a DOWN or UNREACHABLE</p>
<p>state. These are very different (although related) states and can help you quickly determine the root</p>
<p>cause of network problems. Here&rsquo;s how the reachability logic works to distinguish between these two </p>
<p>states…</p>
<p>定义主机父子关系</p>
<p>define host {</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; use idc-server</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; host_name&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; idc router</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; alias&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; beijing idc</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; address&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; a.b.c.1</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; parents&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;inet switch</p>
<p>}</p>
<p>define host {</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; use idc-server</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; host_name&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; inet switch</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; alias&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; beijing idc</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; address&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 10.0.8.90</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; parents&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; localhost</p>
<p>}</p>
<p>define host {</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; use idc-server</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; host_name&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; int switch</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; alias&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; beijing beiyuan</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; address&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 192.168.12.90</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; parents&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; localhost</p>
<p>}</p>
<p>define host {</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; use idc-server</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; host_name&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; lan router</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; alias&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; beijing office</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; address&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; x.y.z.161</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; parents&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; idc router</p>
<p>}</p>
<p>//这里只举一个例子</p>
<p>define host {</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; use idc-server</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; host_name&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; office.veryi.com</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; alias&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; veryi office</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; address&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; x.y.z.168</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; parents&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; lan router</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</p>
<p>&nbsp;</p>
</div><footer class="post__foot u-cf"><a href="/2009/04/24/w/e4-bc-81-e4-b8-9a-e7-ba-a7-e7-bd-91-e7-ae-a1-e5-bc-80-e6-ba-90-e8-bd-af-e4-bb-b6nagios-e8-bf-9c-e7-a8-8b-e4-b8-bb-e6-9c-ba-e7-9a-84-e5-ae-89-e8-a3-85-e9-85-8d-e7-bd-ae/#comments" class="post__foot-link u-fr">评论</a></footer></article><article class="post"><header class="post__head"><time datetime="2009-04-24T06:12:50.000Z" class="post__time">四月 24, 2009</time><h1 class="post__title"><a href="/2009/04/24/w/e4-bc-81-e4-b8-9a-e7-ba-a7-e7-bd-91-e7-ae-a1-e5-bc-80-e6-ba-90-e8-bd-af-e4-bb-b6nagios-e8-bf-9c-e7-a8-8b-e7-9b-91-e6-8e-a7-e8-bd-af-e4-bb-b6-e7-9a-84-e9-85-8d-e7-bd-ae/">企业级网管开源软件Nagios 远程监控软件的配置</a></h1></header><div class="post__main"><p>创建nagios用户及其组，让nagios的运行用户为nagios 而不是root。再把目录/usr/local/nagios的属主设置为nagios，以保证系统的安全。</p>
<p>1、添加系统帐户nagios: useradd nagios 就很容易的把用户和组nagios添加到系统。有的类型的linux发行版添加用户和组要麻烦一些-需要要添加组，然后再执行 useradd -g nagios nagios这样的操作。在实际的运用场景，nagios用户并没有必要作为系统用户来登录linux系统，因此可以不必设置nagios的用户密码，甚至可以把nagios用户的登录shell设置成/bin/false。</p>
<p>2、更改目录属组：chown -R nagios.nagios /usr/local/nagios 。请注意，有的unix/linux的版本用户和属组分隔符号不是&ldquo;.&rdquo;,可能会是这样的形式 chown -R nagios:nagios /usr/local/nagios 。</p>
<p>3、sendmail。看看sendmail是否正常运行？我们需要使用sendmail来发送故障报警信息，所以这个包必须能够正常工作。Sendmail分为服务器和客户端两部分，有2种发送报警邮件的方式：</p>
<p>（1）nagios所在的机器通过sendmail客户端程序把邮件发送到专门的邮件服务器，再由邮件服务器把消息发送到用户邮箱。</p>
<p>&nbsp;</p>
<p>（2）邮件客户端和服务器端就用nagios所在系统sendmail。第一种方式用起来非常规范，但更麻烦，例如需要做地址解析、修改邮件服务器的配置；另外还有一个问题-它还依赖别的系统，增加了故障点和复杂度。第二种方法十分简单，只需启动sendmail服务即可，而且它不再依赖于别的系统和服务。在我工作的实际场景，这两种方法都使用，用专门的邮件服务器会有发送延迟的情况（因为邮件服务器要处理很多其他用户邮件的收发）；而直接用sendmail做服务器和客户端就异常简单和方便了。非常幸运的是，几乎所有的linux/unix发行版都默认安装并启动了sendmail。</p>
<p>&nbsp;</p>
<p>4、手机短信发送工具。如果有自己的短信通道，直接把发送短信的客户端程序sms_send拷贝到目录/usr/local/bin/下。如果没有短信下发的网关通道，那怎么办呢？网络上有很多短信发送的客户端程序，很有名的就是smsclient,把它下载下来，解包后安装。不要忘记购买手机modem和手机卡，modem只支持SIM卡而不支持 cdma。安装完smsclient软件和硬件modem后，测试一下是否正常。如果没有modem又怎么办？办法还是有的：让你的手机号可以接受邮件，这需要你去营业厅开通这项功能。短信报警功能是最有用的功能，我们不可能成天盯着监视屏幕，也不可能成天接受电子邮件，但我们的手机却可以24小时在线，只要被监控对象发生故障，马上就可以收到故障报警短信。还可以用中国移动的飞信。建议启用nagios的短信故障报警功能。</p>
<p>配置</p>
<p>&nbsp;</p>
<p>一、apache 配置</p>
<p>&nbsp;</p>
<p>第一步是修改apache的配置文件httpd.conf,这里的文件路径是 /usr/local/httpd/conf/httpd.conf 。把apache的运行用户和运行组改成nagios。</p>
<p>vi /usr/local/httpd/conf/httpd.conf</p>
<p>&nbsp;</p>
<p>修改:</p>
<p>&nbsp;</p>
<p>User nagios</p>
<p>&nbsp;</p>
<p>Group nagios</p>
<p>&nbsp;</p>
<p>添加:</p>
<p>&nbsp;</p>
<p>Alias /nagios/cgi-bin/images/ &quot;/usr/local/nagios/share/images/&quot;</p>
<p>&nbsp;</p>
<p>&lt;Directory &quot;/usr/local/nagios/share/images/&quot;&gt;</p>
<p>&nbsp;</p>
<p>&nbsp;&nbsp;&nbsp; AllowOverride None</p>
<p>&nbsp;</p>
<p>&nbsp;&nbsp;&nbsp; Options None</p>
<p>&nbsp;</p>
<p>&nbsp;&nbsp;&nbsp; Order allow,deny</p>
<p>&nbsp;</p>
<p>&nbsp;&nbsp;&nbsp; Allow from all</p>
<p>&nbsp;</p>
<p>&lt;/Directory&gt;</p>
<p>&nbsp;</p>
<p>ScriptAlias /nagios/cgi-bin/ &quot;/usr/local/nagios/sbin/&quot;</p>
<p>&nbsp;</p>
<p>&lt;Directory &quot;/usr/local/nagios/sbin/&quot;&gt;</p>
<p>&nbsp;</p>
<p>&nbsp;&nbsp;&nbsp; AllowOverride None</p>
<p>&nbsp;</p>
<p>&nbsp;&nbsp;&nbsp; Options None</p>
<p>&nbsp;</p>
<p>&nbsp;&nbsp;&nbsp; Order allow,deny</p>
<p>&nbsp;</p>
<p>&nbsp;&nbsp;&nbsp; Allow from all</p>
<p>&nbsp;</p>
<p>&nbsp;&nbsp;&nbsp; AuthName &quot;Nagios Access&quot;</p>
<p>&nbsp;</p>
<p>&nbsp;&nbsp;&nbsp; AuthType Basic</p>
<p>&nbsp;</p>
<p>&nbsp;&nbsp;&nbsp; AuthUserFile /usr/local/nagios/etc/htpasswd.users</p>
<p>&nbsp;</p>
<p>&nbsp;&nbsp;&nbsp; Require valid-user</p>
<p>&nbsp;</p>
<p>&lt;/Directory&gt;</p>
<p>&nbsp;</p>
<p>Alias /nagios/ &quot;/usr/local/nagios/share/&quot;</p>
<p>&nbsp;</p>
<p>&lt;Directory &quot;/usr/local/nagios/share/&quot;&gt;</p>
<p>&nbsp;</p>
<p>&nbsp;&nbsp;&nbsp; AllowOverride None</p>
<p>&nbsp;</p>
<p>&nbsp;&nbsp;&nbsp; Options None</p>
<p>&nbsp;</p>
<p>&nbsp;&nbsp;&nbsp; Order allow,deny</p>
<p>&nbsp;</p>
<p>&nbsp;&nbsp;&nbsp; Allow from all</p>
<p>&nbsp;</p>
<p>&nbsp;&nbsp;&nbsp; AuthName &quot;Nagios Access&quot;</p>
<p>&nbsp;</p>
<p>&nbsp;&nbsp;&nbsp; AuthType Basic</p>
<p>&nbsp;</p>
<p>&nbsp;&nbsp;&nbsp; AuthUserFile /usr/local/nagios/etc/htpasswd.users</p>
<p>&nbsp;</p>
<p>&nbsp;&nbsp;&nbsp; Require valid-user</p>
<p>&nbsp;</p>
<p>&lt;/Directory&gt;</p>
<p>2、设置访问权限</p>
<p>&nbsp;</p>
<p>在/usr/local/nagios/share目录下</p>
<p>&nbsp;</p>
<p>/usr/local/httpd/bin/htpasswd -c&nbsp; /usr/local/nagios/etc/htpasswd.users sushixiaoti</p>
<p>&nbsp;</p>
<p>这个apache目录根据安装目录的不同而不同,用htpasswd这个命令生成用户名和密码。-c是生成用户验证文件.</p>
<p>&nbsp;</p>
<p>如果还要添加更多的用户，执行命令 htpasswd 就不需要选项 &ldquo;-c&rdquo;,否则就会覆盖所有已经生成的行。</p>
<p>&nbsp;</p>
<p>配置完成后，执行/usr/local/httpd/bin/apachctl -t&nbsp; 检查apache配置文件是否有语法错误。</p>
<p>&nbsp;</p>
<p>用/usr/local/httpd/bin/apachctl restart&nbsp; 把apache启动，然后从浏览器输入nagios 的访问地址（如：<a href="http://ip/nagios），如果正常，将出现登录验证窗口等待用户输入：" target="_blank" rel="external">http://ip/nagios），如果正常，将出现登录验证窗口等待用户输入：</a></p>
<p>&nbsp;</p>
<p>&nbsp;输入用htpasswd创建的用户名和密码测试一下，没有问题的话，进行下一步配置操作。</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>二、nagios配置</p>
<p>&nbsp;</p>
<p>配置nagios</p>
<p>&nbsp;</p>
<p>刚安装完成的nagios，其配置文件的目录是/usr/local/nagios/etc，从nagios2.6版开始，不用修改配置文件localhost.cfg就可以直接运行../bin/nagios -v nagios.cfg验证程序是否能正常运行。</p>
<p>1、修改配置文件</p>
<p>&nbsp;</p>
<p>Nagios的主配置文件是nagios.cfg:</p>
<p>&nbsp;</p>
<p>cd /usr/local/nagios/etc</p>
<p>&nbsp;</p>
<p>vi nagios.cfg</p>
<p>&nbsp;</p>
<p>log_file=/usr/local/nagios/var/nagios.log</p>
<p>&nbsp;</p>
<p>cfg_file=/usr/local/nagios/etc/objects/commands.cfg</p>
<p>&nbsp;</p>
<p>cfg_file=/usr/local/nagios/etc/objects/contacts.cfg</p>
<p>&nbsp;</p>
<p>cfg_file=/usr/local/nagios/etc/objects/timeperiods.cfg</p>
<p>&nbsp;</p>
<p>cfg_file=/usr/local/nagios/etc/objects/templates.cfg</p>
<p>&nbsp;</p>
<p>cfg_file=/usr/local/nagios/etc/objects/localhost.cfg</p>
<p>&nbsp;</p>
<p>cfg_dir=/usr/local/nagios/etc/servers</p>
<p>&nbsp;</p>
<p>object_cache_file=/usr/local/nagios/var/objects.cache</p>
<p>&nbsp;</p>
<p>precached_object_file=/usr/local/nagios/var/objects.precache</p>
<p>&nbsp;</p>
<p>resource_file=/usr/local/nagios/etc/resource.cfg</p>
<p>&nbsp;</p>
<p>status_file=/usr/local/nagios/var/status.dat</p>
<p>&nbsp;</p>
<p>status_update_interval=10</p>
<p>&nbsp;</p>
<p>nagios_user=nagios</p>
<p>&nbsp;</p>
<p>nagios_group=nagios</p>
<p>&nbsp;</p>
<p>check_external_commands=1</p>
<p>&nbsp;</p>
<p>command_check_interval=-1</p>
<p>&nbsp;</p>
<p>command_file=/usr/local/nagios/var/rw/nagios.cmd</p>
<p>&nbsp;</p>
<p>external_command_buffer_slots=4096</p>
<p>&nbsp;</p>
<p>lock_file=/usr/local/nagios/var/nagios.lock</p>
<p>&nbsp;</p>
<p>temp_file=/usr/local/nagios/var/nagios.tmp</p>
<p>&nbsp;</p>
<p>temp_path=/tmp</p>
<p>&nbsp;</p>
<p>event_broker_options=-1</p>
<p>&nbsp;</p>
<p>log_rotation_method=d</p>
<p>&nbsp;</p>
<p>log_archive_path=/usr/local/nagios/var/archives</p>
<p>&nbsp;</p>
<p>use_syslog=1</p>
<p>&nbsp;</p>
<p>log_notifications=1</p>
<p>&nbsp;</p>
<p>log_service_retries=1</p>
<p>&nbsp;</p>
<p>log_host_retries=1</p>
<p>&nbsp;</p>
<p>log_event_handlers=1</p>
<p>&nbsp;</p>
<p>log_initial_states=0</p>
<p>&nbsp;</p>
<p>log_external_commands=1</p>
<p>&nbsp;</p>
<p>log_passive_checks=1</p>
<p>&nbsp;</p>
<p>service_inter_check_delay_method=s</p>
<p>&nbsp;</p>
<p>max_service_check_spread=30</p>
<p>&nbsp;</p>
<p>service_interleave_factor=s</p>
<p>&nbsp;</p>
<p>host_inter_check_delay_method=s</p>
<p>&nbsp;</p>
<p>max_host_check_spread=30</p>
<p>&nbsp;</p>
<p>max_concurrent_checks=0</p>
<p>&nbsp;</p>
<p>check_result_reaper_frequency=10</p>
<p>&nbsp;</p>
<p>max_check_result_reaper_time=30</p>
<p>&nbsp;</p>
<p>check_result_path=/usr/local/nagios/var/spool/checkresults</p>
<p>&nbsp;</p>
<p>max_check_result_file_age=3600</p>
<p>&nbsp;</p>
<p>cached_host_check_horizon=15</p>
<p>&nbsp;</p>
<p>cached_service_check_horizon=15</p>
<p>&nbsp;</p>
<p>enable_predictive_host_dependency_checks=1</p>
<p>&nbsp;</p>
<p>enable_predictive_service_dependency_checks=1</p>
<p>&nbsp;</p>
<p>soft_state_dependencies=0</p>
<p>&nbsp;</p>
<p>auto_reschedule_checks=0</p>
<p>&nbsp;</p>
<p>auto_rescheduling_interval=30</p>
<p>&nbsp;</p>
<p>auto_rescheduling_window=180</p>
<p>&nbsp;</p>
<p>sleep_time=0.25</p>
<p>&nbsp;</p>
<p>service_check_timeout=60</p>
<p>&nbsp;</p>
<p>host_check_timeout=30</p>
<p>&nbsp;</p>
<p>event_handler_timeout=30</p>
<p>&nbsp;</p>
<p>notification_timeout=30</p>
<p>&nbsp;</p>
<p>ocsp_timeout=5</p>
<p>&nbsp;</p>
<p>perfdata_timeout=5</p>
<p>&nbsp;</p>
<p>retain_state_information=1</p>
<p>&nbsp;</p>
<p>state_retention_file=/usr/local/nagios/var/retention.dat</p>
<p>&nbsp;</p>
<p>retention_update_interval=60</p>
<p>&nbsp;</p>
<p>use_retained_program_state=1</p>
<p>&nbsp;</p>
<p>use_retained_scheduling_info=1</p>
<p>&nbsp;</p>
<p>retained_host_attribute_mask=0</p>
<p>&nbsp;</p>
<p>retained_service_attribute_mask=0</p>
<p>&nbsp;</p>
<p>retained_process_host_attribute_mask=0</p>
<p>&nbsp;</p>
<p>retained_process_service_attribute_mask=0</p>
<p>&nbsp;</p>
<p>retained_contact_host_attribute_mask=0</p>
<p>&nbsp;</p>
<p>retained_contact_service_attribute_mask=0</p>
<p>&nbsp;</p>
<p>interval_length=60</p>
<p>&nbsp;</p>
<p>use_aggressive_host_checking=0</p>
<p>&nbsp;</p>
<p>execute_service_checks=1</p>
<p>&nbsp;</p>
<p>accept_passive_service_checks=1</p>
<p>&nbsp;</p>
<p>execute_host_checks=1</p>
<p>&nbsp;</p>
<p>accept_passive_host_checks=1</p>
<p>&nbsp;</p>
<p>enable_notifications=1</p>
<p>&nbsp;</p>
<p>enable_event_handlers=1</p>
<p>&nbsp;</p>
<p>process_performance_data=0</p>
<p>&nbsp;</p>
<p>obsess_over_services=0</p>
<p>&nbsp;</p>
<p>obsess_over_hosts=0</p>
<p>&nbsp;</p>
<p>translate_passive_host_checks=0</p>
<p>&nbsp;</p>
<p>passive_host_checks_are_soft=0</p>
<p>&nbsp;</p>
<p>check_for_orphaned_services=1</p>
<p>&nbsp;</p>
<p>check_for_orphaned_hosts=1</p>
<p>&nbsp;</p>
<p>check_service_freshness=1</p>
<p>&nbsp;</p>
<p>service_freshness_check_interval=60</p>
<p>&nbsp;</p>
<p>check_host_freshness=0</p>
<p>&nbsp;</p>
<p>host_freshness_check_interval=60</p>
<p>&nbsp;</p>
<p>additional_freshness_latency=15</p>
<p>&nbsp;</p>
<p>enable_flap_detection=1</p>
<p>&nbsp;</p>
<p>low_service_flap_threshold=5.0</p>
<p>&nbsp;</p>
<p>high_service_flap_threshold=20.0</p>
<p>&nbsp;</p>
<p>low_host_flap_threshold=5.0</p>
<p>&nbsp;</p>
<p>high_host_flap_threshold=20.0</p>
<p>&nbsp;</p>
<p>date_format=us</p>
<p>&nbsp;</p>
<p>p1_file=/usr/local/nagios/bin/p1.pl</p>
<p>&nbsp;</p>
<p>enable_embedded_perl=1</p>
<p>&nbsp;</p>
<p>use_embedded_perl_implicitly=1</p>
<p>&nbsp;</p>
<p>illegal_object_name_chars=`~!$%^&amp;*|’&quot;&lt;&gt;?,()=</p>
<p>&nbsp;</p>
<p>illegal_macro_output_chars=`~$&amp;|’&quot;&lt;&gt;</p>
<p>&nbsp;</p>
<p>use_regexp_matching=0</p>
<p>&nbsp;</p>
<p>use_true_regexp_matching=0</p>
<p>&nbsp;</p>
<p>admin_email=nagios@localhost</p>
<p>&nbsp;</p>
<p>admin_pager=pagenagios@localhost</p>
<p>&nbsp;</p>
<p>daemon_dumps_core=0</p>
<p>&nbsp;</p>
<p>use_large_installation_tweaks=0</p>
<p>&nbsp;</p>
<p>enable_environment_macros=1</p>
<p>&nbsp;</p>
<p>debug_level=0</p>
<p>&nbsp;</p>
<p>debug_verbosity=1</p>
<p>&nbsp;</p>
<p>debug_file=/usr/local/nagios/var/nagios.debug</p>
<p>&nbsp;</p>
<p>max_debug_file_size=1000000</p>
<p>改check_external_commands =0为</p>
<p>&nbsp;</p>
<p>check_external_commands=1</p>
<p>&nbsp;</p>
<p>//这行的作用是允许执行在web界面下重启nagios、停止主机/服务检查等操作。把command_check_interval的值从默认的1改成</p>
<p>&nbsp;</p>
<p>command_check_interval=15s</p>
<p>&nbsp;</p>
<p>//Note: By setting this value to -1, Nagios will check for external commands as often as possible.</p>
<p>第二个要修改的配置文件是cgi.cfg，它的作用是控制相关cgi脚本。</p>
<p>&nbsp;</p>
<p>vi cgi.cfg</p>
<p>&nbsp;</p>
<p>main_config_file=/usr/local/nagios/etc/nagios.cfg</p>
<p>&nbsp;</p>
<p>physical_html_path=/usr/local/nagios/share</p>
<p>&nbsp;</p>
<p>url_html_path=/nagios</p>
<p>&nbsp;</p>
<p>show_context_help=0</p>
<p>&nbsp;</p>
<p>use_pending_states=1</p>
<p>&nbsp;</p>
<p>use_authentication=1</p>
<p>&nbsp;</p>
<p>use_ssl_authentication=0</p>
<p>&nbsp;</p>
<p>authorized_for_system_information=nagiosadmin,sushixiaoti</p>
<p>&nbsp;</p>
<p>authorized_for_configuration_information=nagiosadmin,sushixiaoti</p>
<p>&nbsp;</p>
<p>authorized_for_system_commands=nagiosadmin,sushixiaoti</p>
<p>&nbsp;</p>
<p>authorized_for_all_services=nagiosadmin,sushixiaoti</p>
<p>&nbsp;</p>
<p>authorized_for_all_hosts=nagiosadmin,sushixiaoti</p>
<p>&nbsp;</p>
<p>authorized_for_all_service_commands=nagiosadmin,sushixiaoti</p>
<p>&nbsp;</p>
<p>authorized_for_all_host_commands=nagiosadmin,sushixiaoti</p>
<p>&nbsp;</p>
<p>default_statusmap_layout=5</p>
<p>&nbsp;</p>
<p>default_statuswrl_layout=4</p>
<p>&nbsp;</p>
<p>ping_syntax=/bin/ping -n -U -c 5 $HOSTADDRESS$</p>
<p>&nbsp;</p>
<p>refresh_rate=90</p>
<p>&nbsp;</p>
<p>escape_html_tags=1</p>
<p>&nbsp;</p>
<p>action_url_target=_blank</p>
<p>&nbsp;</p>
<p>notes_url_target=_blank</p>
<p>&nbsp;</p>
<p>lock_author_names=1</p>
<p>&nbsp;</p>
<p>//确保use_authentication=1。把 use_authentication的值设置成&rdquo;0&rdquo;来取消验证是一个十分糟糕的想法。接下来修改default_user_name=sushixiaoti</p>
<p>上述用户名是执行命令</p>
<p>&nbsp;</p>
<p>/usr/local/httpd/bin/htpasswd -c /usr/local/nagios/etc/htpasswd sushixiaoti</p>
<p>&nbsp;</p>
<p>所生成的。</p>
<p>&nbsp;</p>
<p>nagios 3的其它配置文件在objects目录下:</p>
<p>&nbsp;</p>
<p>cd&nbsp; objects</p>
<p>&nbsp;</p>
<p>vi contacts.cfg</p>
<p>&nbsp;</p>
<p>添加</p>
<p>&nbsp;</p>
<p>define contact {</p>
<p>&nbsp;</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; contact_name&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; sushixiaoti</p>
<p>&nbsp;</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; alias&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; system administrator</p>
<p>&nbsp;</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; email&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; sushixiaoti@veryi.com</p>
<p>&nbsp;</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; use&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; generic-contact&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ; Inherit default values from generic-contact template (defined above)</p>
<p>&nbsp;</p>
<p>}</p>
<p>&nbsp;</p>
<p>define contactgroup{</p>
<p>&nbsp;</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; contactgroup_name&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; admingroup</p>
<p>&nbsp;</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; alias&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Nagios info</p>
<p>&nbsp;</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; members&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; sushixiaoti</p>
<p>&nbsp;</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</p>
<p>&nbsp;</p>
<h1 id="contact_name&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;_//不要有空格">contact_name&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; //不要有空格</h1><p>vi commands.cf</p>
<p>&nbsp;</p>
<p>添加</p>
<p>&nbsp;</p>
<h1 id="NRPE_COMMAND">NRPE COMMAND</h1><p>&nbsp;</p>
<p>#</p>
<p>&nbsp;</p>
<h6 id="#">#</h6><p>&nbsp;</p>
<h1 id="\’check_nrpe_\’_command_definition">\’check_nrpe \’ command definition</h1><p>&nbsp;</p>
<p>#</p>
<p>&nbsp;</p>
<p>define command{</p>
<p>&nbsp;</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; command_name check_nrpe</p>
<p>&nbsp;</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; command_line $USER1$/check_nrpe -H $HOSTADDRESS$ -c $ARG1$</p>
<p>&nbsp;</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</p>
<p>&nbsp;</p>
<p>define command{</p>
<p>&nbsp;</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; command_name check_rdisk</p>
<p>&nbsp;</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; command_line $USER1$/check_nrpe -H $HOSTADDRESS$ -c $ARG1$ -a $ARG2$ $ARG3$ $ARG4$</p>
<p>&nbsp;</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</p>
<p>运行程序</p>
<p>&nbsp;</p>
<p>/usr/local/nagios/bin/nagios -v /usr/local/nagios/etc/nagios.cfg</p>
<p>&nbsp;</p>
<p>来检查所有配置文件的正确性。</p>
<p>启动nagios</p>
<p>&nbsp;</p>
<p>/usr/local/nagios/bin/nagios -d /usr/local/nagios/etc/nagios.cfg</p>
<p>&nbsp;</p>
<p>mkdir -p /var/log/nagios</p>
<p>&nbsp;</p>
<p>chown nagios.nagios /var/log/nagios</p>
<p>chmod +x /etc/init.d/nagios</p>
<p>nagios 最基本的安装配置已经完成，只有对本地主机的监控。</p>
</div><footer class="post__foot u-cf"><a href="/2009/04/24/w/e4-bc-81-e4-b8-9a-e7-ba-a7-e7-bd-91-e7-ae-a1-e5-bc-80-e6-ba-90-e8-bd-af-e4-bb-b6nagios-e8-bf-9c-e7-a8-8b-e7-9b-91-e6-8e-a7-e8-bd-af-e4-bb-b6-e7-9a-84-e9-85-8d-e7-bd-ae/#comments" class="post__foot-link u-fr">评论</a></footer></article><article class="post"><header class="post__head"><time datetime="2009-04-24T06:06:52.000Z" class="post__time">四月 24, 2009</time><h1 class="post__title"><a href="/2009/04/24/w/linux config nagios-3/">linux上功能强大的企业级网管开源软件nagios 3 安装与配置</a></h1></header><div class="post__main"><p>nagios是一款网络管理软件，开源的软件。能够对网络内的主机和硬件设备进行状态监控。nagios的优势：</p>
<p>免费；开源；高扩展性。</p>
<p>nagios能实现的功能：</p>
<p>1. 状态监控</p>
<p>2. 预警处理</p>
<p>3. 集中，规模化管理</p>
<p>4. 可视化显示方式</p>
<p>nagios的实现方式：nagios采用分布-集中的管理模式。在nagios服务器上安装nagios主程序，在被监控主机上安装nagios代理程序。通过nagios主程序和nagios代理程序之间的通讯，监视主机状态。主程序和代理程序之间有两种工作方式，一种是主程序—&gt;Active—&gt;代理程序；另一种是主程序—&gt;passive—&gt;代理程序；顾名思义，是以一方向另一方主动提出通讯需求来划分的。</p>
<p>&nbsp;&nbsp;&nbsp; </p>
<p>nagios服务器上需要安装以下包，nagios主程序，nagios的plugin程序，check_nrpe程序，imagepak包；</p>
<p>没有插件，nagios将什么作用也没有，插件也是nagios扩展功能的强大武器，除了下载常用的插件外，我们还可以根据实际要求编写自己的插件。插件与nagios之间的版本关联不大。在配置过程指定的安装路径是/usr/local/nagios，而不是/usr/local/nagios-plugin,安装完成后，将在目录/usr/local/nagios生成目录libexec（里面有很多文件），这正是nagios所需要的。</p>
<p>安装web服务器apache</p>
<p>Web服务不是nagios所必须的，但是如果nagios没有web，只有通过查看nagios的日志来判断状态，而不能直观查看。</p>
<p>安装</p>
<p>操作系统：</p>
<p>cat /etc/redhat-release</p>
<p>CentOS release 4.4 (Final)</p>
<p>rpm -ihv gd-devel-2.0.28-4.4E.1.i386.rpm</p>
<p>groupadd nagios</p>
<p>useradd nagios -g nagios -s /sbin/nologin</p>
<p>下载</p>
<p>wget <a href="http://nchc.dl.sourceforge.net/sourceforge/nagios/nagios-3.0.6.tar.gz" target="_blank" rel="external">http://nchc.dl.sourceforge.net/sourceforge/nagios/nagios-3.0.6.tar.gz</a></p>
<p>tar zxf nagios-3.0.6.tar.gz -C /usr/local/src</p>
<p>cd /usr/local/src/nagios-3.0.6/</p>
<p>./configure -prefix=/usr/local/nagios</p>
<h1 id="&ndash;with-gd-lib=/usr/local/lib_&ndash;with-gd-inc=/usr/local/include">&ndash;with-gd-lib=/usr/local/lib &ndash;with-gd-inc=/usr/local/include</h1><p>make -j6 all &amp;&amp; make install </p>
<p>make install-init &amp;&amp; make install-commandmode &amp;&amp;make install-config</p>
<p>cp&nbsp; daemon-init.in&nbsp; /etc/init.d/nagios</p>
<p>&nbsp; make install</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp; - This installs the main program, CGIs, and HTML files</p>
<p>&nbsp; make install-init</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp; - This installs the init script in /etc/rc.d/init.d</p>
<p>&nbsp; make install-commandmode</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp; - This installs and configures permissions on the</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; directory for holding the external command file</p>
<p>&nbsp; make install-config</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp; - This installs <em>SAMPLE</em> config files in /usr/local/nagios/etc</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; You’ll have to modify these sample files before you can</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; use Nagios.&nbsp; Read the HTML documentation for more info</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; on doing this.&nbsp; Pay particular attention to the docs on</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; object configuration files, as they determine what/how</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; things get monitored!</p>
<p>&nbsp; make install-webconf</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp; - This installs the Apache config file for the Nagios</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; web interface</p>
<p>安装nagios-plugin</p>
<p>wget <a href="http://jaist.dl.sourceforge.net/sourceforge/nagiosplug/nagios-plugins-1.4.13.tar.gz" target="_blank" rel="external">http://jaist.dl.sourceforge.net/sourceforge/nagiosplug/nagios-plugins-1.4.13.tar.gz</a></p>
<p>tar zxf nagios-plugins-1.4.13.tar.gz -C /usr/local/src</p>
<p>cd /usr/local/src/nagios-plugins-1.4.13</p>
<p>./configure -prefix=/usr/local/nagios-plugins</p>
<h1 id="-enable-redhat-pthread-workaround_这个参数可以在出现checking_for_redhat_spopen_problem&hellip;_错误时使用">-enable-redhat-pthread-workaround 这个参数可以在出现checking for redhat spopen problem&hellip; 错误时使用</h1><p>make -j6 &amp;&amp; make install</p>
<p>cp -a /usr/local/nagios-plugins/libexec /usr/local/nagios</p>
<p>安装imagepak-base.tar.gz</p>
<p>下载：</p>
<p><a href="http://download.chinaunix.net/download/0005000/4709.shtml" target="_blank" rel="external">http://download.chinaunix.net/download/0005000/4709.shtml</a></p>
<p>tar -xzf imagepak-base.tar.gz -C /usr/local/src</p>
<p>cd /usr/local/src/</p>
<p>mv base/ /usr/local/nagios/share/images/logos/</p>
<p>安装nrpe(主要是使用check_nrpe模块)</p>
<p>wget <a href="http://voxel.dl.sourceforge.net/sourceforge/nagios/nrpe-2.12.tar.gz" target="_blank" rel="external">http://voxel.dl.sourceforge.net/sourceforge/nagios/nrpe-2.12.tar.gz</a></p>
<p>tar -xzf nrpe-2.12.tar.gz -C /usr/local/src</p>
<p>cd /usr/local/src/nrpe-2.12</p>
<p>./configure —enable-ssl —enable-command-args</p>
<p>make all</p>
<p>cp src/check_nrpe /usr/local/nagios/libexec</p>
<p>chown -R nagios.nagios /usr/local/nagios</p>
<p>&nbsp;</p>
</div><footer class="post__foot u-cf"><a href="/2009/04/24/w/linux config nagios-3/#comments" class="post__foot-link u-fr">评论</a></footer></article><article class="post"><header class="post__head"><time datetime="2009-04-21T07:08:59.000Z" class="post__time">四月 21, 2009</time><h1 class="post__title"><a href="/2009/04/21/w/e5-9c-a8linux-e4-b8-8a-e6-ba-90-e4-bb-a3-e7-a0-81-e5-ae-89-e8-a3-85-e4-b8-8e-e9-85-8d-e7-bd-aebind-9-dns/">在Linux上源代码安装与配置bind 9 dns</a></h1></header><div class="post__main"><p>支持ipv6，参考rfc1912配置。</p>
<p>Bind是一款开放源码的DNS服务器软件，Bind由美国加州大学Berkeley分校开发和维护的，全名为Berkeley Internet Name Domain它是目前世界上使用最为广泛的DNS服务器软件，支持各种unix平台和windows平台。</p>
<p>操作系统:</p>
<p>centos</p>
<p>下载:</p>
<p>wget <a href="http://ftp.isc.org/isc/bind9/9.6.0-P1/bind-9.6.0-P1.tar.gz" target="_blank" rel="external">http://ftp.isc.org/isc/bind9/9.6.0-P1/bind-9.6.0-P1.tar.gz</a></p>
<p>最新bind 9需要安装新版本openssl:</p>
<p>安装zlib</p>
<p>tar xfj zlib-1.2.3.tar.bz2 -C /usr/local/src</p>
<p>cd /usr/local/src/zlib-1.2.3</p>
<p>./configure</p>
<p>make -j6 &amp;&amp; make install </p>
<p>echo &quot;/usr/local/lib&quot; &gt;&gt; /etc/ld.so.conf</p>
<p>ldconfig</p>
<p>&nbsp;</p>
<p>安装openssl</p>
<p><a href="http://www.openssl.org/source/" target="_blank" rel="external">http://www.openssl.org/source/</a></p>
<p>tar zxf openssl-0.9.8k.tar.gz&nbsp; -C /usr/local/src</p>
<p>cd&nbsp; /usr/local/src/openssl-0.9.8k</p>
<p>./config —prefix=/usr/local/openssl —openssldir=/usr/local/openssl shared zlib</p>
<p>make &amp;&amp; make test &amp;&amp; make install</p>
<p>/usr/local/openssl/lib/</p>
<p>echo &quot;/usr/local/openssl/lib/&quot; &gt;&gt; /etc/ld.so.conf</p>
<p>ldconfig</p>
<p>tar xfz bind-9.6.0-P1.tar.gz -C /usr/local/src</p>
<p>cd /usr/local/src/bind-9.6.0-P1</p>
<p>./configure —prefix=/usr/local/named —enable-threads —enable-ipv6 —with-openssl=/usr/local/openssl —with-dlz-mysql</p>
<p>make -j6 &amp;&amp; make install</p>
<p>建立BIND用户：</p>
<p>groupadd bind</p>
<p>useradd -g bind -d /usr/local/named -s /sbin/nologin bind</p>
<p>创建配置文件目录：</p>
<p>mkdir -p /usr/local/named/etc/primary</p>
<p>chown bind:bind /usr/local/named/etc</p>
<p>chmod 770 /usr/local/named/etc</p>
<p>创建PID和日志文件：</p>
<p>mkdir -p /var/run/named/</p>
<p>chmod 777 /var/run/named/</p>
<p>chown bind:bind /var/run/named/</p>
<p>mkdir -p /var/log/named/</p>
<p>touch /var/log/named/dns_warnings</p>
<p>touch /var/log/named/dns_logs</p>
<p>chown bind:bind /var/log/named</p>
<p>建立启动脚本：</p>
<p>vi /etc/init.d/named</p>
<h1 id="!/bin/bash">!/bin/bash</h1><p>#</p>
<h1 id="named&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;_This_shell_script_takes_care_of_starting_and_stopping">named&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; This shell script takes care of starting and stopping</h1><h1 id="&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;_named_(BIND_DNS_server)-">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; named (BIND DNS server).</h1><p>#</p>
<h1 id="chkconfig:_-_55_45">chkconfig: - 55 45</h1><h1 id="description:_named_(BIND)_is_a_Domain_Name_Server_(DNS)_\">description: named (BIND) is a Domain Name Server (DNS) \</h1><h1 id="that_is_used_to_resolve_host_names_to_IP_addresses-">that is used to resolve host names to IP addresses.</h1><h1 id="probe:_true">probe: true</h1><h1 id="Source_function_library-">Source function library.</h1><p>. /etc/rc.d/init.d/functions</p>
<h1 id="Source_networking_configuration-">Source networking configuration.</h1><p>[ -r /etc/sysconfig/network ] &amp;&amp; . /etc/sysconfig/network</p>
<h1 id="Check_that_networking_is_up-">Check that networking is up.</h1><p>[ ${NETWORKING} = &quot;no&quot; ] &amp;&amp; exit 0</p>
<p>[ -x /usr/local/named/sbin/named ] || exit 0</p>
<p>RETVAL=0</p>
<p>prog=&quot;named&quot;</p>
<p>if [ <code>id -u</code> -ne 0 ]</p>
<p>then</p>
<p>echo &quot;ERROR:For bind to port 53,must run as root.&quot;</p>
<p>exit 1</p>
<p>fi</p>
<p>case &quot;$1&quot; in</p>
<p>start)</p>
<p>if [ -x /usr/local/named/sbin/named ]; then</p>
<p>&nbsp; /usr/local/named/sbin/named -u bind -c /usr/local/named/etc/named.conf &amp;&amp; echo . &amp;&amp; echo ‘BIND9 server started.’</p>
<p>fi</p>
<p>;;</p>
<p>stop)</p>
<p>&nbsp; #kill <code>cat /var/run/named/pid</code> &amp;&amp; echo . &amp;&amp; echo ‘BIND9 server stopped.’</p>
<p>&nbsp; killproc $prog &amp;&amp; echo . &amp;&amp; echo ‘BIND9 server stopped.’</p>
<p>;;</p>
<p>restart)</p>
<p>echo .</p>
<p>echo &quot;Restart BIND9 server&quot;</p>
<p>$0 stop</p>
<h1 id="sleep_10">sleep 10</h1><p>$0 start</p>
<p>;;</p>
<p>*)</p>
<p>echo &quot;$0 start | stop | restart&quot;</p>
<p>;;</p>
<p>esac</p>
<p>chmod 755 /etc/init.d/named</p>
<p>chown root:root /etc/init.d/named</p>
<p>chkconfig —add named</p>
<p>chkconfig —level 345&nbsp; named on</p>
<p>chkconfig —list named</p>
<p>到这里bind已经安装完毕 .下面是解析部分.创建主要的配置文件：</p>
<p>cd /usr/local/named/etc/</p>
<p>vi /usr/local/named/etc/named.conf</p>
<p>acl &quot;reserv-lan&quot; { 10.0.0.0/8; 172.16.0.0/12; 192.168.0.0/16; };</p>
<p>acl &quot;query-lan&quot; { 0/0; };</p>
<p>acl &quot;trusted-lan&quot; { 192.168.6.0/23; a.b.c.168/32; };</p>
<p>options {</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; directory &quot;/usr/local/named/etc&quot;;</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; listen-on {127.0.0.1; a.b.c.168;};</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; pid-file &quot;/var/log/named/named.pid&quot;;</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; memstatistics-file &quot;/var/log/named/data/named_mem_stats.txt&quot;;</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; dump-file &quot;/var/log/named/data/cache_dump.db&quot;;</p>
<p>&nbsp;&nbsp;&nbsp; max-cache-size 64M;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; //最大的缓存大小为64MB</p>
<p>&nbsp;&nbsp;&nbsp; tcp-clients 256;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; //最大的客户端为256个</p>
<p>&nbsp;&nbsp;&nbsp; recursive-clients 4000;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; //服务器同时为用户执行的递归查询的最大数量 为4000</p>
<p>&nbsp;&nbsp;&nbsp; interface-interval 0;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; //启动named时才检查监听的网络接口</p>
<p>&nbsp;&nbsp;&nbsp; cleaning-interval 480;&nbsp; //每隔480分钟将统计日志写入文件</p>
<p>&nbsp;&nbsp;&nbsp; lame-ttl 1800;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; //设定缓存有问题服务器指示的秒数为30分钟</p>
<p>&nbsp;&nbsp;&nbsp; max-ncache-ttl 168000;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; //为降低网络流量和提升服务器存储否定回答的性能</p>
<p>&nbsp;&nbsp;&nbsp; max-cache-ttl 86400;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; //设定了服务器储存普通(肯定)答案的最大时间</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; version &quot;www.veryi.com&quot;;</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; datasize 512M;</p>
<p>&nbsp;&nbsp;&nbsp; auth-nxdomain yes;</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; recursion yes;</p>
<p>&nbsp;&nbsp;&nbsp; zone-statistics yes;</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; statistics-file &quot;/var/log/named/data/named.stats&quot;;</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; allow-transfer { none; };</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; allow-query { &quot;any&quot;; };</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; allow-recursion {</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &quot;query-lan&quot;;</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; };</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; allow-notify {</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &quot;trusted-lan&quot;;</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; };</p>
<p>/<strong><strong><strong><strong><strong><strong><strong>**</strong></strong></strong></strong></strong></strong></strong></p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; forward first;</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; forwarders {</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 208.67.220.220;</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 208.67.222.222;</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 202.106.0.20;</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 202.106.196.115;</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; };</p>
<p><strong><strong><strong><strong><strong><strong><strong>*</strong></strong></strong></strong></strong></strong></strong>/</p>
<p>};</p>
<p>include &quot;rndc.key&quot;;</p>
<p>include &quot;named_log.conf&quot;;</p>
<p>zone &quot;.&quot; {</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; type hint;</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; file &quot;named.root&quot;;</p>
<p>};</p>
<p>include &quot;named.rfc1912.zones&quot;;</p>
<p>zone &quot;6.168.192.in-addr.arpa&quot; {</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; type master;</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; file &quot;primary/192.168.6.in-addr.arpa.zone&quot;;</p>
<p>};</p>
<p>&nbsp;&nbsp;&nbsp; </p>
<p>生成rndc-key:</p>
<p>cd /usr/local/named/etc/</p>
<p>../sbin/rndc-confgen | head -5&nbsp; &gt; rndc.key</p>
<p>添加完成后，保存。</p>
<p>更新根区文件：</p>
<p>cd /usr/local/named/etc/</p>
<p>wget ftp://ftp.internic.org/domain/named.root</p>
<p>或者:</p>
<p>dig</p>
<p>dig&nbsp; @192.58.128.30 &gt;named.root</p>
<p>vi named_log.conf</p>
<p>logging {</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; channel default_log</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; { file &quot;/var/log/named/default_log&quot; versions 3 size 8192k;</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; //severity warning;</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; severity info;</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; print-category yes;</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; print-severity yes;</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; print-time yes;</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; };</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; category default {</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; default_log;</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; };</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; channel queries_log</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; { file &quot;/var/log/named/queries_log&quot; versions 8 size 8192k;</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; severity info;</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; print-category yes;</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; print-severity yes;</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; print-time yes;</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; };</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; category queries {</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; queries_log;</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; };</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; channel general_log</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; { file &quot;/var/log/named/general_log&quot; versions 8 size 8192k;</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; severity info;</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; print-category yes;</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; print-severity yes;</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; print-time yes;</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; };</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; category general { general_log; };</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; channel client_log</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; { file &quot;/var/log/named/client_log&quot; versions 3 size 8192k;</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; severity info;</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; print-category yes;</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; print-severity yes;</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; print-time yes;</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; };</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; category client { client_log; };</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; channel config_log</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; { file &quot;/var/log/named/config_log&quot; versions 3 size 8192k;</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; severity info;</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; print-category yes;</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; print-severity yes;</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; print-time yes;</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; };</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; category config {</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; config_log;</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; };</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; channel database_log</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; { file &quot;/var/log/named/database_log&quot; versions 3 size 8192k;</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; severity info;</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; print-category yes;</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; print-severity yes;</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; print-time yes;</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; };</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; category database {</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; database_log;</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; };</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; channel dnssec_log</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; { file &quot;/var/log/named/dnssec_log&quot; versions 3 size 8192k;</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; severity info;</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; print-category yes;</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; print-severity yes;</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; print-time yes;</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; };</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; category dnssec {</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; dnssec_log;</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; };</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; channel lame-servers_log</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; { file &quot;/var/log/named/lame-servers_log&quot; versions 3 size 8192k;</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; //severity warning;</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; severity info;</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; print-category yes;</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; print-severity yes;</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; print-time yes;</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; };</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; category lame-servers {</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; lame-servers_log;</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; };</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; channel network_log</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; { file &quot;/var/log/named/network_log&quot; versions 3 size 8192k;</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; severity info;</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; print-category yes;</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; print-severity yes;</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; print-time yes;</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; };</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; category network {</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; network_log;</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; };</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; channel notify_log</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; { file &quot;/var/log/named/notify_log&quot; versions 3 size 8192k;</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; severity info;</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; print-category yes;</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; print-severity yes;</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; print-time yes;</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; };</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; category notify {</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; notify_log;</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; };</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; channel resolver_log</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; { file &quot;/var/log/named/resolver_log&quot; versions 3 size 8192k;</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; severity info;</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; print-category yes;</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; print-severity yes;</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; print-time yes;</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; };</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; category resolver {</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; resolver_log;</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; };</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; channel security_log</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; { file &quot;/var/log/named/security_log&quot; versions 3 size 8192k;</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; //severity info;</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; severity warning;</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; print-category yes;</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; print-severity yes;</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; print-time yes;</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; };</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; category security {</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; security_log;</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; };</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; channel update_log</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; { file &quot;/var/log/named/update_log&quot; versions 3 size 8192k;</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; severity info;</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; print-category yes;</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; print-severity yes;</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; print-time yes;</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; };</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; category update {</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; update_log;</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; };</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; channel xfer-in_log</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; { file &quot;/var/log/named/xfer-in_log&quot; versions 3 size 8192k;</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; severity info;</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; print-category yes;</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; print-severity yes;</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; print-time yes;</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; };</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; category xfer-in {</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; xfer-in_log;</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; };</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; channel xfer-out_log</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; { file &quot;/var/log/named/xfer-out_log&quot; versions 3 size 8192k;</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; severity info;</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; print-category yes;</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; print-severity yes;</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; print-time yes;</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; };</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; category xfer-out {</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; xfer-out_log;</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; };</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; channel default_debug {</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; file &quot;/var/log/named/named.run_log&quot;;</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; severity dynamic;</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; };</p>
<p>};</p>
<p>vi named.rfc1912.zones</p>
<p>// named.rfc1912.zones:</p>
<p>//</p>
<p>// ISC BIND named zone configuration for zones recommended by</p>
<p>// RFC 1912 section 4.1 : localhost TLDs and address zones</p>
<p>// </p>
<p>zone &quot;localdomain&quot; IN {</p>
<p>&nbsp;&nbsp;&nbsp; type master;</p>
<p>&nbsp;&nbsp;&nbsp; file &quot;localdomain.zone&quot;;</p>
<p>&nbsp;&nbsp;&nbsp; allow-update { none; };</p>
<p>};</p>
<p>zone &quot;localhost&quot; IN {</p>
<p>&nbsp;&nbsp;&nbsp; type master;</p>
<p>&nbsp;&nbsp;&nbsp; file &quot;localhost.zone&quot;;</p>
<p>&nbsp;&nbsp;&nbsp; allow-update { none; };</p>
<p>};</p>
<p>zone &quot;0.0.127.in-addr.arpa&quot; IN {</p>
<p>&nbsp;&nbsp;&nbsp; type master;</p>
<p>&nbsp;&nbsp;&nbsp; file &quot;named.local&quot;;</p>
<p>&nbsp;&nbsp;&nbsp; allow-update { none; };</p>
<p>};</p>
<p>zone &quot;0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.ip6.arpa&quot; IN {</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; type master;</p>
<p>&nbsp;&nbsp;&nbsp; file &quot;named.ip6.local&quot;;</p>
<p>&nbsp;&nbsp;&nbsp; allow-update { none; };</p>
<p>};</p>
<p>zone &quot;255.in-addr.arpa&quot; IN {</p>
<p>&nbsp;&nbsp;&nbsp; type master;</p>
<p>&nbsp;&nbsp;&nbsp; file &quot;named.broadcast&quot;;</p>
<p>&nbsp;&nbsp;&nbsp; allow-update { none; };</p>
<p>};</p>
<p>zone &quot;0.in-addr.arpa&quot; IN {</p>
<p>&nbsp;&nbsp;&nbsp; type master;</p>
<p>&nbsp;&nbsp;&nbsp; file &quot;named.zero&quot;;</p>
<p>&nbsp;&nbsp;&nbsp; allow-update { none; };</p>
<p>};</p>
<p>vi named.local</p>
<p>$TTL&nbsp;&nbsp;&nbsp; 86400</p>
<p>@&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; IN&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; SOA&nbsp;&nbsp;&nbsp;&nbsp; localhost. root.localhost.&nbsp; (</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1997022700 ; Serial</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 28800&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ; Refresh</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 14400&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ; Retry</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 3600000&nbsp;&nbsp;&nbsp; ; Expire</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 86400 )&nbsp;&nbsp;&nbsp; ; Minimum</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; IN&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; NS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; localhost.</p>
<p>1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; IN&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; PTR&nbsp;&nbsp;&nbsp;&nbsp; localhost.</p>
<p>vi local.zone</p>
<p>$TTL&nbsp;&nbsp;&nbsp; 86400</p>
<p>@&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; IN SOA&nbsp;&nbsp;&nbsp; @&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; root (</p>
<p>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; 42&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; serial (d. adams)</p>
<p>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; 3H&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; refresh</p>
<p>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; 15M&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; retry</p>
<p>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; 1W&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; expiry</p>
<p>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; 1D )&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; minimum</p>
<p>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; IN NS&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; @</p>
<p>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; IN A&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; 127.0.0.1</p>
<p>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; IN AAAA&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ::1</p>
<p>vi localhost.zone</p>
<p>$TTL&nbsp;&nbsp;&nbsp; 86400</p>
<p>@&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; IN SOA&nbsp;&nbsp;&nbsp; @&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; root (</p>
<p>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; 42&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; serial (d. adams)</p>
<p>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; 3H&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; refresh</p>
<p>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; 15M&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; retry</p>
<p>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; 1W&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; expiry</p>
<p>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; 1D )&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; minimum</p>
<p>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; IN NS&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; @</p>
<p>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; IN A&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; 127.0.0.1</p>
<p>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; IN AAAA&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ::1</p>
<p>vi localdomain.zone</p>
<p>$TTL&nbsp;&nbsp;&nbsp; 86400</p>
<p>@&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; IN SOA&nbsp;&nbsp;&nbsp; localhost root (</p>
<p>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; 42&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; serial (d. adams)</p>
<p>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; 3H&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; refresh</p>
<p>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; 15M&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; retry</p>
<p>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; 1W&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; expiry</p>
<p>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; 1D )&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ; minimum</p>
<p>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; IN NS&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; localhost</p>
<p>localhost&nbsp;&nbsp;&nbsp; IN A&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; 127.0.0.1</p>
<p>vi named.zero</p>
<p>$TTL&nbsp;&nbsp;&nbsp; 86400</p>
<p>@&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; IN SOA&nbsp; localhost.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; root.localhost. (</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 42&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ; serial (d. adams)</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 3H&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ; refresh</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 15M&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ; retry</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1W&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ; expiry</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1D )&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ; minimum</p>
<p>&nbsp;&nbsp;&nbsp; IN&nbsp;&nbsp;&nbsp; NS&nbsp;&nbsp;&nbsp; localhost.</p>
<p>vi named.broadcas</p>
<p>$TTL&nbsp;&nbsp;&nbsp; 86400</p>
<p>@&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; IN SOA&nbsp; localhost.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; root.localhost. (</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 42&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ; serial (d. adams)</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 3H&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ; refresh</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 15M&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ; retry</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1W&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ; expiry</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1D )&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ; minimum</p>
<p>&nbsp;&nbsp;&nbsp; IN&nbsp;&nbsp;&nbsp; NS&nbsp;&nbsp;&nbsp; localhost.</p>
<p>vi named.ip6.local</p>
<p>$TTL&nbsp;&nbsp;&nbsp; 86400</p>
<p>@&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; IN&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; SOA&nbsp;&nbsp;&nbsp;&nbsp; localhost. root.localhost.&nbsp; (</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1997022700 ; Serial</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 28800&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ; Refresh</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 14400&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ; Retry</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 3600000&nbsp;&nbsp;&nbsp; ; Expire</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 86400 )&nbsp;&nbsp;&nbsp; ; Minimum</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; IN&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; NS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; localhost.</p>
<p>1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; IN&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; PTR&nbsp;&nbsp;&nbsp;&nbsp; localhost.</p>
<p>vi primary/192.168.6.in-addr.arpa.zone</p>
<p>$ORIGIN .</p>
<p>$TTL 203616&nbsp;&nbsp;&nbsp;&nbsp; ; 2 days 8 hours 33 minutes 36 seconds</p>
<p>6.168.192.in-addr.arpa.&nbsp; IN SOA&nbsp; localhost. acy.163.com. (</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 2003080900 ; serial</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 3600&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ; refresh (1 hour)</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 300&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ; retry (5 minutes)</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 3600000&nbsp;&nbsp;&nbsp; ; expire (5 weeks 6 days 16 hours)</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ; minimum (0 seconds)</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; )</p>
<p>$TTL 20000&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ; 5 hours 33 minutes 20 seconds</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp; IN&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; NS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; localhost</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp; IN&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; NS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; mail.veryi.com.</p>
<p>$ORIGIN 6.168.192.in-addr.arpa.</p>
<p>2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; IN&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; PTR&nbsp;&nbsp;&nbsp;&nbsp; mx6.veryi.com.</p>
<p>$GENERATE 3-34 $ PTR pc$.veryi.com.</p>
<p>35&nbsp;&nbsp;&nbsp;&nbsp; IN&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; PTR&nbsp;&nbsp; veryi.veryi.com.</p>
<p>运行测试：</p>
<h1 id="/usr/local/named/sbin/named_-gc_/usr/local/named/etc/named-conf_&amp;">/usr/local/named/sbin/named -gc /usr/local/named/etc/named.conf &amp;</h1><p>/usr/local/named/sbin/named -u bind -d5 -g -c /usr/local/named/etc/named.conf</p>
<p>状态检查：</p>
<p>/usr/local/named/sbin/rndc status</p>
<p>&nbsp;</p>
</div><footer class="post__foot u-cf"><a href="/2009/04/21/w/e5-9c-a8linux-e4-b8-8a-e6-ba-90-e4-bb-a3-e7-a0-81-e5-ae-89-e8-a3-85-e4-b8-8e-e9-85-8d-e7-bd-aebind-9-dns/#comments" class="post__foot-link u-fr">评论</a></footer></article><article class="post"><header class="post__head"><time datetime="2009-04-15T06:50:24.000Z" class="post__time">四月 15, 2009</time><h1 class="post__title"><a href="/2009/04/15/w/gpt-e5-88-86-e5-8c-ba-e5-9c-a8pc-e6-9c-ba-e4-b8-8a-e5-ae-89-e8-a3-85linux-e4-b8-8d-e8-83-bd-e5-bc-95-e5-af-bc-e7-9a-84-e8-a7-a3-e5-86-b3-e6-96-b9-e6-b3-95/">GPT分区在PC机上安装linux不能引导的解决方法</a></h1></header><div class="post__main"><p>硬盘以前装了mac os,被转换成了GPT,安装centos 5.3时提示:</p>
<p>Your boot partition is on a disk using the GPT partitioning Scheme but this machines cannot boot using GPT.</p>
<pre><code>用linux live CD，推荐slax <span class="function_start"><span class="keyword">on</span></span> usb disk,启动系统以后，执行:
</code></pre><p>查看硬盘的设备名称：</p>
<p>fdisk -l</p>
<p>假设是/dev/sdb</p>
<p>parted</p>
<p>select /dev/sdb</p>
<p>mklabel msdos</p>
<p>quit</p>
<p>或者运行</p>
<pre><code>parted -s /dev/sdb mklabel msdos

然后就可以正常安装了。

可以用 parted -s /dev/sdc print来查看分区情况

补充一些知识:

目前我们可以接触到的大部分pc依然采用上世纪遗传下来的 BIOS + MBR 组合。 BIOS，基本输入输出系统 (Basic <span class="keyword">Input</span>-Output System)，是软件与硬件之间的一个接口，可以把它看作一个翻译在中文与英语之间，虽然两者完全不同，不过可以让大家了解 BIOS 所处的位置，BIOS 通常被写入一块 ROM 芯片连接在主板上，当然也有直接写入北桥的，不过相当少见。 BIOS 几乎是完全用汇编语言编写，很大程度上决定了主板的性能及稳定性。

MBR，主引导记录 (Master Boot <span class="keyword">Record</span>)，也就是我们常见的分区方法，不过管理员外的最终用户很少知道它的存在，MBR 分区的标准决定了 MBR 只支持在<span class="number">2</span>TB以下 (超过 <span class="number">2</span>TB 的只能管理 <span class="number">2</span>TB) 的硬盘中创建<span class="number">4</span>个分区表项，要获得更多分区，需要次级结构--扩展分区。扩展分区可以再次被分成一个或多个逻辑磁盘，也就是普通情况下的<span class="keyword">C</span>盘以外的盘，或说第一个分区以外的部分，有些情况下 Windows 里的<span class="keyword">C</span>盘可能会是一个逻辑分区。

EFI，可扩展固件接口 (Extensible Firmware Interface)，由英特尔 (Intel) 公司提出的一种替代 BIOS 的升级方案。 EFI 的位置很特殊，它不像是 BIOS 那样自己即是固件又是接口，EFI 只是一个接口，位于操作系统与平台固件之间，感觉像是公司、CEO、CEO秘书之间的关系一样，由CEO (操作系统) 下任务，CEO秘书 (EFI) 负责把任务分配下发到公司各部门经理 (平台固件)，经理们又把任务下发到具体的小组 (各类硬件) 去完成。

GPT ，全局唯一标识磁盘分区表 (GUID <span class="keyword">Partition</span> <span class="keyword">Table</span>)，GUID，全局唯一标识符 (Globally <span class="keyword">Unique</span> Identifier) 。GUID 分区表 (GPT) 是作为 Extensible Firmware Interface (EFI) 计划的一部分引入的。当然，你也可以在 BIOS 的PC中使用 GPT 分区，虽然 GPT 来自以 EFI 计划，但并不依赖于 EFI。GPT 相对于以往 PC 普遍使用的主引导记录 (MBR) 分区方案更加灵活。比如可以超过 MBR 分区表项<span class="number">4</span>个的限制，在 GPT 规范里对分区的数量几乎是没有限制的，大家在网上可以查到的<span class="number">128</span>个实际上是 Windows 系统 (支持 GPT 的 Windows) 做出的限制。 GPT 对可管理磁盘大小也超过了 MBR 的<span class="number">2</span>TB (<span class="number">1</span>TB = <span class="number">1024</span>GB) 而达到了 <span class="number">18</span>EB (<span class="number">1</span>EB = <span class="number">1024</span>TB) 。在 MBR 分区方案中操作系统的引导是通过放在磁盘最开始 (第一扇区) 里的 MBR (这里的 MBR 是指主引导记录，而不是主引导记录分区方案，两者是同名的。我的猜测是为了与 GPT 分区方案区分，使用了主引导记录引导方式的名字 MBR 来命名此种分区方案，我查不到确切的资料正明我的猜测是否正确，只能大家努力区分一下了。) 。把重要的信息 (如分区信息、目录等) 放在某个扇区里是 MBR 分区方案的方法，而 GPT 把这个信息放到了分区里，Intel的解释是这样可以更加明确更加安全。 GPT 分区为了保护自己不受 MBR 方案下磁盘管理软件的危害，在磁盘的最开始位置 (第一个扇区) 建立了一个保护分区 (Protective MBR)，这种分区的类型标识为 <span class="number">0xEE</span>。苹果系统 (Mac OS X) 下这个保护分区大小为 <span class="number">200</span>MB，这个分区在 Window NT 磁盘管理器里名字叫做 GPT 保护分区。这个分区可以让不能识别 GPT 的磁盘管理软件把 GPT 磁盘看成一个未知格式的分区，而不是错误地当成一个未分区的磁盘。
</code></pre><p>常用的 MS-DOS 分区表格式不能在一个大于 2TB 的设备上使用。要支持大于2TB</p>
<pre><code>的设备，GPT 分区表格式必须被使用，并且必须使用 <span class="keyword">*</span>parted<span class="keyword">*</span> 工具程序来创建和

管理 GPT 分区。
</code></pre></div><footer class="post__foot u-cf"><a href="/2009/04/15/w/gpt-e5-88-86-e5-8c-ba-e5-9c-a8pc-e6-9c-ba-e4-b8-8a-e5-ae-89-e8-a3-85linux-e4-b8-8d-e8-83-bd-e5-bc-95-e5-af-bc-e7-9a-84-e8-a7-a3-e5-86-b3-e6-96-b9-e6-b3-95/#comments" class="post__foot-link u-fr">评论</a></footer></article><article class="post"><header class="post__head"><time datetime="2009-04-10T01:19:36.000Z" class="post__time">四月 10, 2009</time><h1 class="post__title"><a href="/2009/04/10/w/linux-lvs-e9-9b-86-e7-be-a4-e5-ba-94-e7-94-a8-e7-bb-8f-e9-aa-8c-e8-b0-88/">linux lvs集群 应用经验谈</a></h1></header><div class="post__main"><p>lvs(Linux Virtual Server)负载均衡的安装配置网上的文章很多了，这里把lvs集群2年应用中的一些经验写出来，欢迎大家提宝贵意见：</p>
<p>&nbsp;</p>
<p>应用环境：</p>
<p>&nbsp;</p>
<p>前置机（负载均衡器）：Xeon(TM) CPU 3.00GHz/2G</p>
<p>&nbsp;</p>
<p>CentOS release 5 (Final)，kernel： 2.6.21.5</p>
<p>&nbsp;</p>
<p>lvs DR: Weighted Round Robin；</p>
<p>&nbsp;</p>
<p>heartbeat（实际没用上）；mon（监控real server)</p>
<p>&nbsp;</p>
<p>real server:</p>
<p>&nbsp;</p>
<p>各种配置，pc机不少。</p>
<p>&nbsp;</p>
<p>因为是在线集中培训，用户要提交作业、发表评论，以动态内容为主。一天内的最大在线用户5万以上。</p>
<p>&nbsp;</p>
<p>1、lvs NAT的效率较低，抗攻击能力差，建议用lvs DR、lvs TUN方式。</p>
<p>&nbsp;</p>
<p>2、lvs DR不能转发到端口，比如说，只能80到80，不能80到8080。</p>
<p>&nbsp;</p>
<p>3、lvs非常稳定，因为一些原因，</p>
<p><strong>load balancer</strong></p>
<p>没有后备系统，但LB从未发生过停止服务。</p>
<p>&nbsp;</p>
<p>4、lvs LB在被攻击时，负载略有提高，real server很快停止响应，在增加一定数量real server后，恢复正常服务。</p>
<p>&nbsp;</p>
<p>5、前置机的负载很低，ipvsadm -Lnc|wc -l超过十万时，cpu的使用率&lt;10%。</p>
</div><footer class="post__foot u-cf"><a href="/2009/04/10/w/linux-lvs-e9-9b-86-e7-be-a4-e5-ba-94-e7-94-a8-e7-bb-8f-e9-aa-8c-e8-b0-88/#comments" class="post__foot-link u-fr">评论</a></footer></article><article class="post"><header class="post__head"><time datetime="2009-04-09T06:30:14.000Z" class="post__time">四月 9, 2009</time><h1 class="post__title"><a href="/2009/04/09/w/e5-be-ae-e6-b3-a2-e7-82-89-e7-9a-84-e4-b8-a5-e9-87-8d-e5-8d-b1-e5-ae-b3-e7-9c-9f-e7-9b-b8-e2-80-94-e4-bd-a0-e7-9f-a5-e9-81-93-e5-90-97-ef-bc-9f/">微波炉的真相—化食物为垃圾</a></h1></header><div class="post__main"><p>人们常说:化腐朽为神奇，不过，微波炉是化神奇为腐朽，它把食物变成极阴的垃圾。</p>
<p>&nbsp;&nbsp;&nbsp; 首先令我们好奇的是：何以微波炉会有害？倘若有害，为何政府不回收呢？.</p>
<p>&nbsp;&nbsp;&nbsp; 有个很有意思的比喻，或者可以比拟这个情况：当你将一只青蛙扔进一个开着大火的热锅时，它会立刻跳走，但如果你把青蛙放入冷水锅中用一根蜡烛慢慢在锅底燃烧加温，刚开始时，青蛙并不觉的有任何烫感，但逐渐等到它觉的热了，想跳走时，他的脚已被热锅黏住，再也无法跳走。如今微波炉就像那根蜡烛，使用它的人就像那只青蛙，什么时候会被黏住？或许是明天、明年，更可能你已经被黏住了，只是你自己不知道。</p>
<p>&nbsp;&nbsp;&nbsp; </p>
<p>&nbsp;&nbsp;&nbsp; 医院中严格规定，绝不可用微波炉去温热血液。有关微波炉所引起的各式伤害，前苏联人作了许多研究，例如：</p>
<p>（a）肉类微波后会产生名为d-NitroSodienthanolanines的一种致癌物。</p>
<p>（b）微波过的牛奶、水果、麦片中的氨基酸转化为致癌物。</p>
<p>（c）蔬菜微波后，会将植物生物碱(Plant.Alkaloids)转化成致癌物。</p>
<p>&nbsp;&nbsp;&nbsp; </p>
<p>&nbsp;&nbsp;&nbsp; 有人问：如果微波炉有害，何以政府不制止它的使用？乃因它所造成的伤害，不是短时间内立即可看到，需若干年以后才显现出来。而在资本主义和市场经济环境下，一切研究以利益为前导，对无利可图的事，是没有人去作研究的。在美国这个以科学挂帅的国家，最优秀的人才都做了工程师，只讲究效率、眼前效果，却不去管后果、长远影响。在美国，癌症也比其它国家领先，高居第一位，而为保护大众利益作研究的团体几乎没有，都是在为大公司牟利而研究。相比较，英国的社会学系都是最优秀的精英分子,稍次者才去当工程师。由于当政者资历、文化背景的差异，在美国，为公众利益而不求牟利的研究是无法和其它一些国家相比拟的。</p>
<p>&nbsp;&nbsp;&nbsp; </p>
<p>&nbsp;&nbsp;&nbsp; 根据前苏联、德国、瑞士等国所作的&ldquo;微波炉对人体危害&rdquo;的研究，发现许多负面结论：</p>
<p>（01）它破坏脑组织。脑的传播是*磁波，长期食用微波炉处理过的食物会中和脑磁波，使脑退化、磁波短路。</p>
<p>（02）微波食物除了含有致癌物外，还会产生一堆不能被身体吸收利用的不明副产品。</p>
<p>（03）长期食用微波食物会使男女荷尔蒙分泌量减低或改变。</p>
<p>（04）微波炉食物的副产品会长期而永久性的残存于人体内。</p>
<p>（05）微波食物中的矿物质、维生素及营养几乎被破坏殆尽，或改变成致癌物、或转变成不能被身体分解的合成物。</p>
<p>（06）微波炉烹煮的食物使蔬菜中的矿物质改变成会破坏人体健康的自由基。</p>
<p>（07）微波炉食物能引起胃癌，研究发现，有些胃癌及肠癌，皆与常吃微波炉食物有关，这或许解释了何以美国人近些年来患直肠癌的比例增加如此迅速。</p>
<p>（08）长期吃微波炉食物，容易使身体产生大量癌变细胞。</p>
<p>（09）长期摄取微波炉食物，由于其中营养已被破坏，必将造成身体免疫系统出现问题。</p>
<p>（10）摄取微波炉食物将使记忆退化、精神不集中、情绪不稳定、理解力降低。</p>
<p>摘录自新加坡营养学博士洪山本《疾病的形成与防范》</p>
<p>&nbsp;&nbsp;&nbsp; 婴儿专用奶粉盒上的警示说明文字明确写出：绝不可用微波炉去煮热，因这将破坏所有的营养。相信大家现在知道该如何对待微波炉食物了：远离为妙！</p>
<p>家里的微波炉，也不要用了，也不能送人，己所不欲勿施于人。</p>
<p>&nbsp;</p>
</div><footer class="post__foot u-cf"><a href="/2009/04/09/w/e5-be-ae-e6-b3-a2-e7-82-89-e7-9a-84-e4-b8-a5-e9-87-8d-e5-8d-b1-e5-ae-b3-e7-9c-9f-e7-9b-b8-e2-80-94-e4-bd-a0-e7-9f-a5-e9-81-93-e5-90-97-ef-bc-9f/#comments" class="post__foot-link u-fr">评论</a></footer></article></main><aside class="site-aside"><div class="widget about"><div class="b"><div class="info u-cf"><img src="/avatar.jpg"><div class="text"> <p>dayu graceful</p><p>vegan</p><p>linux sysadm</p><p> <a href="dayu2829@sina.com" title="wiebo" class="weibo ico"></a><a href="kindquiet@qq.com" title="qq" class="qq ico"></a></p></div></div></div></div><div class="widget tags"><div class="h">categories</div><div class="b"> <ul><li><a href="/categories/计算机/">计算机</a><small>(136)</small></li><li><a href="/categories/佛法传统文化/">佛法传统文化</a><small>(18)</small></li><li><a href="/categories/健康/">健康</a><small>(13)</small></li><li><a href="/categories/学习/">学习</a><small>(3)</small></li><li><a href="/categories/网络/">网络</a><small>(1)</small></li><li><a href="/categories/佛法传统文化/健康/">健康</a><small>(1)</small></li></ul></div></div><div class="widget links"><div class="h">links</div><div class="b"> <ul><li><a href="http://www.enzymesos.com/">酵素Enzyme救地球</a></li><li><a href="http://www.osalt.com/">商业软件的开源替代品</a></li></ul></div></div></aside></section><footer class="site-foot"><div class="inner"><div class="site-copy u-fl">© 2015 dayu<bdi> ❤ Theme by <a href="http://riny.net" target="_blank">Bubblings</a></bdi></div><menu class="page-menu u-fr"><li class="page-menu__item"><a title="Previous" href="/page/14/" class="page-menu__link icon-arrow-left">prev</a></li><li class="page-menu__item"><a title="Next" href="/page/16/" class="page-menu__link icon-arrow-right">next</a></li></menu></div></footer><div id="back-top" title="返回顶部"></div><script src="/js/script.js"></script></body></html>