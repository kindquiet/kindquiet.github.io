<!DOCTYPE html><html><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="description" content="kindquiet"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="alternative" href="/atom.xml" title="kindquiet素食勤俭敬老孝慈" type="application/atom+xml"><link rel="icon" href="/favicon.ico"><title>kindquiet素食勤俭敬老孝慈</title><meta name="keywords" content="centos,素食"><meta name="description" content="kindquiet素食勤俭敬老孝慈"><script>var _hmt = _hmt || [];(function() {  var hm = document.createElement("script");  hm.src = "//hm.baidu.com/hm.js?33ec0e4a308e2f174e68f15c700d8b5d";  var s = document.getElementsByTagName("script")[0];   s.parentNode.insertBefore(hm, s);})();</script><link rel="stylesheet" href="/css/style.css" type="text/css"><!--[if lt IE 9]><script>(function(a,b){a="abbr article aside audio bdi canvas data datalist details dialog figcaption figure footer header hgroup main mark meter nav output progress section summary template time video".split(" ");for(b=a.length-1;b>=0;b--)document.createElement(a[b])})()</script><![endif]--></head><body><header class="site-head"><div class="inner"><h1 class="site-title u-fl"><a href="/">kindquiet素食勤俭敬老孝慈</a></h1><nav class="site-nav u-fr"><ul class="site-nav__list"><li class="site-nav__item"><a href="/" class="site-nav__link">Home</a></li><li class="site-nav__item"><a href="/archives" class="site-nav__link">Archives</a></li></ul></nav></div></header><section class="site-content"><main class="site-main"><article class="post"><header class="post__head"><time datetime="2013-07-24T08:09:17.000Z" class="post__time">七月 24, 2013</time><h1 class="post__title"><a href="/2013/07/24/w/e7-a6-81-e6-ad-a2wordpress-e5-8d-8a-e8-a7-92-e7-ac-a6-e5-8f-b7-e8-87-aa-e5-8a-a8-e5-8f-98-e6-88-90-e5-85-a8-e8-a7-92-e7-ac-a6-e5-8f-b7/">禁止WordPress半角符号自动变成全角符号</a></h1></header><div class="post__main"><p> WordPress默认情况下会将代码的半角符号自动转成全角符号，防止外部源代码在网页上执行。例如会把—装换为－。在没有使用代码高亮插件时，直接粘贴在网页上的代码，就不能直接使用，必须将符号改为半角才行。对于经常需要在文章中使用代码的朋友来说，可以禁用WordPress的默认转换功能。</p>
<p>方法一</p>
<pre><code>修改当前主题的functions.php文件，例如：wp-content/themes/amazinggrace/functions.php，在?php 和 ? 之间加入下面的代码即可：

remove_filter(&amp;<span class="string">#39</span>;the_content&amp;<span class="string">#39</span>;, &amp;<span class="string">#39</span>;wptexturize&amp;<span class="string">#39</span>;);

这种方法的好处就是直接修改的是主题包中的文件，因此我们在不更换主题的情况下，wordpress可以自由升级；同样的，其缺点就是，当我们更换了主题之后，就要重新进行添加代码。
</code></pre><p>方法二</p>
<pre><code><span class="number">1</span>、打开并编辑 wp-includes/formatting.php 文件，找到以下代码（大概第<span class="number">124</span>行）：

<span class="variable">$curl</span> = str_replace(<span class="variable">$static_characters</span>, <span class="variable">$static_replacements</span>, <span class="variable">$curl</span>);
</code></pre><p>$curl = preg_replace($dynamic_characters, $dynamic_replacements, $curl);</p>
<p>2、将$curl 开头的两句代码注释掉，修改后，效果如下：</p>
<pre><code>// <span class="variable">$curl</span> = str_replace(<span class="variable">$static_characters</span>, <span class="variable">$static_replacements</span>, <span class="variable">$curl</span>);
</code></pre><p>// $curl = preg_replace($dynamic_characters, $dynamic_replacements, $curl);</p>
<pre><code>这样，别人复制下来的函数代码标点就不会是全角，无法使用了！

方法二是直接修改WordPress程序文件的，只要更新WordPress，就得重新修改，所以推荐使用方法一。
</code></pre></div><footer class="post__foot u-cf"><a href="/2013/07/24/w/e7-a6-81-e6-ad-a2wordpress-e5-8d-8a-e8-a7-92-e7-ac-a6-e5-8f-b7-e8-87-aa-e5-8a-a8-e5-8f-98-e6-88-90-e5-85-a8-e8-a7-92-e7-ac-a6-e5-8f-b7/#comments" class="post__foot-link u-fr">评论</a></footer></article><article class="post"><header class="post__head"><time datetime="2013-07-19T08:07:16.000Z" class="post__time">七月 19, 2013</time><h1 class="post__title"><a href="/2013/07/19/w/e7-b3-96-e8-9c-9c-ef-bc-8c-e4-bb-80-e4-b9-88-e6-a0-b7-e7-9a-84-e7-ba-a2-e7-b3-96-e5-a5-bd-ef-bc-8c-e7-b3-96-e7-9f-a5-e8-af-86-e7-a7-91-e6-99-ae-ef-bc-8c-e6-9d-a5-e8-87-aa-e4-ba-92-e8-81-94-e7-bd-91/">糖蜜，什么样的红糖好，糖知识科普，来自互联网</a></h1></header><div class="post__main"><p>现代红糖呈粉末状或者呈晶体状，古方红糖呈块状。</p>
<pre><code>而古方红糖内部能够看到非常明显的沙纹，与《本草纲目》的描述完全一致，这样的糖中凝结的沙，也是沙糖这个名称的由来。

红糖为什么比白糖贵，广东的红塘一斤3元，白糖一斤2.5元，我知道从甜菜甘蔗压榨出的汁液加工后是红塘，如果再进一步脱色处理后才是白糖，按理说白糖应比红塘贵才对啊？
</code></pre><p>红糖的生产成本是比白砂糖要低一点的。可是价格和成本没有必然的联系，还要受到供求关系及其它因素的影响。</p>
<p>白砂糖是最主要的食用糖，其产量占食糖总产量的97%以上，而红糖仅仅是一个副产品，产量不大，因而受供求关系影响也就更大。</p>
<p>正常年份，在批发市场上，红糖是比白砂糖要便宜的。但由于红糖没有国家储备和地方储备，国外产红糖的国家又极少，因而如果遇到供不应求的年份，国家没有办法像对待白砂糖一样通过向市场抛售储备糖或加大进口量来平抑糖价，这时红糖的批发价格也可能会超过白糖。</p>
<p>至于零售价格，红糖确实普遍要比白砂糖贵。原因可以从生产企业和超市等终端零售商两个方面来分析。</p>
<pre><code><span class="number">1</span>，作为生产企业，红糖的销售量远远小于白砂糖的销售量，所以生产红糖的资金流转比较慢、固定成本（例如进入超市要缴纳的费用、生产企业的各类固定成本分摊等）相对较高。这些都被计入了红糖的成本价格之中。

<span class="number">2</span>，作为超市，白砂糖是常用品，价格透明，所以超市要拼价格、拉销量的；红糖是补充产品，销量低，利润率就要提高（因为超市考核的是单位面积的销售额和利润率，白糖和红糖在超市里虽然销售量相差很大，可是却占有相同的面积，因而采用同样的利润率是不划算的）。简单点来说，白砂糖讲的是薄利多销，红糖要更多的考虑利润问题，这样才能达到利润平衡点。另外，红糖的价格波动空间远高于白糖<span class="comment">(白砂糖一般吨价在3000-4200元之间时是正常的，可是红糖的价格常常会成倍数的波动)</span>，而作为超市，价格调整比较困难，因而在实际操作时商家会考虑这些因素，预留出一些利润空间给红糖。
</code></pre><p>总之，价格是受到成本和供应关系的多重影响的，经济运行是要遵循市场经济规律的。</p>
<p>红糖在原材料方面只能使用国产甘蔗，而白糖的原材料可以使用进口原糖和甜菜原糖。这就是说红糖的原材料稀缺，原材料就比较贵。</p>
<pre><code>而且中国甘蔗主要产地在云南地区，生产了红糖运到北方，运费也会比较贵。

而北方的糖厂主要使用甜菜原糖和进口原糖（由于产糖国如古巴等，生产成本极低，所以古巴原糖海运到中国的到岸价可能比国内甘蔗原糖价格还低，许多进口农产品都这样）。所以生产白糖更方便，而且更便宜。

红糖对原材料的要求太高，所以成本就相对高了。再加上供求关系的问题，综合因素导致红糖比白糖价格高。
</code></pre><p>红糖是未经纯化的粗糖，保留了许多非糖的杂质，其中的维生素和矿物质对人是有益的，但也因此更容易变质。</p>
<p>在现代化的工业生产和市场营销中，需求量小的东西哪怕生产工艺再简单，也需要更高的成本。另一方面，白糖的生产可以以甜菜为原料。经纯化脱色之后，分别以甜菜和甘蔗生产出来的白糖并没有明显的差别。而传统的红糖生产工艺只能以甘蔗为原料，甜菜的糖蜜会带来让人难以接受的味道。对原料的挑剔也在一定程度上抵消了工艺简单所节省的成本。当然，现在也可以通过往甜菜白糖里加蔗糖蜜而得到红糖。不过这样一来，制取红糖的工艺就比较复杂了。</p>
<p>最后说说冰糖。冰糖的生产比白糖红糖都要复杂，也最为纯净，价格高也是顺理成章的事情。</p>
<pre><code>原糖

又称粗糖，系以甘蔗为原料，经压榨取汁、糖汁清净处理，煮炼结晶，离心分蜜，制成的带有一层糖蜜，不供直接食用、作为精炼糖厂再加工用的原料糖；糖度（转光度）不低于<span class="number">97</span><span class="comment">%。</span>
</code></pre><p>红糖</p>
<pre><code>系带蜜的甘蔗成品糖，在我国，指甘蔗经榨汁和简易石灰法澄清处理后，经浓缩煮炼制成的带蜜糖。 

根据加工工艺的不同，红糖又可分为赤砂糖（结晶颗粒较大），红糖粉（结晶粒子细小），片糖、砖糖（用模具）、碗糖（用模具）等；赤砂糖、红糖是用经过澄清处理的低纯度糖浆，在真空煮糖罐中煮制而成的覆盖一层棕红色、具有甘蔗风味糖浆的结晶糖，晶粒大的为赤砂糖，晶粒细小的叫红糖，其成分为：蔗糖分<span class="number">88</span>～<span class="number">93</span><span class="preprocessor">%</span>，还原糖<span class="number">1.5</span>～<span class="number">4.5</span><span class="preprocessor">%</span>，水分<span class="number">2.5</span>～<span class="number">3.5</span><span class="preprocessor">%</span>；片糖的生产方法则是将达到一定过饱和度的热糖浆（约<span class="number">92</span>Bx）从煮糖器分配器中流入片糖连续成型带上，在均衡平稳的运送过程中，糖浆被扒平，自然冷却凝固，经机械划线、分离出带，分片成糖，降温包装，其成分为：蔗糖分<span class="number">83</span><span class="preprocessor">%</span>以上，还原糖<span class="number">6.5</span><span class="preprocessor">%</span>以下，水分<span class="number">5</span><span class="preprocessor">%</span>以下；所有红糖，不论是结晶糖或成型糖，其共同的特征是：一、成品红糖中几乎保留了蔗汁中的全部成分；二、保留了甘蔗糖汁的原汁、原味，特别是甘蔗的清香味。消费者喜爱红糖、选择红糖，主要是基于红糖的这些基本特征。 

由于甜菜糖糖蜜带有令人不愉快的气味，因此、世界各国均不生产带糖蜜的甜菜红糖。 
</code></pre><p>普通白砂糖</p>
<pre><code>系以甘蔗、甜菜或原糖（粗糖）为原料，经提取糖汁（或再溶），糖汁或糖浆清净处理、煮炼结晶，离心分蜜、筛选干燥等工序加工制成的成品蔗糖结晶，蔗糖分不低于<span class="number">99.5</span><span class="comment">%。 </span>
</code></pre><p>普通绵白糖</p>
<pre><code>系以甜菜或原糖（粗糖）为原料，经精炼加工生产的晶粒细小、颜色洁白、质地绵软的成品糖，总糖分（蔗糖分＋还原糖分）不低于<span class="number">97.92</span><span class="comment">%。</span>
</code></pre><p>精制幼砂糖</p>
<pre><code>精制幼砂糖即精制小粒砂糖，因其纯净度高，蔗糖份含量达到<span class="number">99.8</span><span class="comment">%以上，水分含量极少，各项卫生指标控制严格，晶粒小、均匀、松散，易溶化，易贮藏，不易受潮结块，特别适合于供作家庭常备食用糖。 </span>
</code></pre><p>精制绵白糖 </p>
<pre><code>精制绵白糖在颗粒小、易溶方面与精制幼砂糖相似，两者的主要区别是，绵白糖的晶粒更细小，一般不超过<span class="number">0.3</span>毫米、且要求均匀；此外、在分蜜后，加入<span class="number">1.5</span>～<span class="number">2.5</span><span class="preprocessor">%</span>（按固形物计）的砂糖转化糖浆或精炼淀粉糖浆，保留<span class="number">0.8</span>～<span class="number">1.6</span><span class="preprocessor">%</span>的水分，在螺旋输送槽中边输送、边搅拌使其混合均匀；最后经绵白糖干燥机将水分、温度调控到规定的要求后装袋封口。由于绵白糖中含有一定量的转化糖浆（含果糖成分），味甜、吸湿，因而可保持糖的绵软状态和光泽。但是因绵白糖水分含量较高（相对砂糖而言），所以不宜长期贮藏；在干旱地区与季节，绵白糖容易脱水结块，不利于方便食用。绵白糖一旦脱水结块后，不宜采用机械方法破碎。届时、可将结块绵白糖置于一定温湿度条件下（例如放在碗中，置于蒸锅内，利用热水的蒸汽、不需用明火加热），勿需太长时间，绵白糖就会自行吸湿松散开来，之后、如将糖置于密闭罐中，防止水分散失，可保持松散状态. 
</code></pre><p>冰糖</p>
<pre><code>冰糖的生产方法有两种，第一种生产方法是挂线结晶养大法，即将热的精炼饱和蔗糖溶液缓缓倒入挂有细棉线的桶中，在结晶室中经过7天以上缓慢冷却结晶，蔗糖结晶围绕棉线形成并养大成大粒、大块冰糖。第二种生产方法是投放晶种养大法，即在一摇床式结晶槽中，放入热的精炼饱和糖液，投入定量的晶种，在摆动槽中边摆动、边缓慢降温（用水套夹层保温、控温）使结晶养大，形成单晶冰糖。冰糖的理化性质与精炼砂糖相同，在中国被用作中药引子，在不少国家被当作医治伤风感冒的良药，更受到广大农村消费者的喜爱。
</code></pre><p>方糖与块糖 </p>
<pre><code>将含水分<span class="number">2</span>～<span class="number">2.5</span><span class="preprocessor">%</span>精制小粒砂糖原料，通过一转鼓式方糖压块成型机压成方块状，然后将成型的方糖，置放到金属托盘上，于干燥箱中将水分烘干至<span class="number">0.5</span><span class="preprocessor">%</span>以下，冷却至室温后用纸盒包装。 

方糖因晶粒间有透气孔隙，因而具有定量、易溶，食用方便的特点，特别适合供作餐桌用糖。 

如适当增加原料含水量，加大成型时的压缩比，烘干后，可得比较硬实的块糖，块糖携带、食用方便，为牧区和流动性大的工作人员所喜爱。 

良质红糖呈晶粒状或粉末状，干燥而松散，不结块，不成团，无杂质，其水溶液清晰，无沉淀，无悬浮物。

次质红糖结块或受潮溶化

劣质红糖溶化流卤，有杂质，糖水溶液中可见沉淀物或悬浮物。

气味鉴别 良质红糖具有甘蔗汁的清香味。

次质红糖气味正常但清香味淡。

劣质红糖有酒味、酸味或其他外来不良气味。

滋味鉴别 检查红糖的滋味时，可取少许红糖放在口中用舌头品尝，然后再配制<span class="number">10</span>％的红糖水溶液进行品尝。

良质红糖口味浓甜带鲜，微有糖蜜味。

次质红糖滋味比较正常。

劣质红糖有焦苦味或其他外来异味。

糖蜜 molasses

工业制糖过程中，蔗糖结晶后，剩余的不能结晶，但仍含有较多糖的液体残留物。糖蜜是制糖工业的副产品，是一种粘稠、黑褐色、呈半流动的物体，组成因制糖原料、加工条件的不同而有差异，其中主要含有大量可发酵糖（主要是蔗糖），因而是很好的发酵原料，可用作酵母、味精、有机酸等发酵制品的底物或基料。糖蜜的矿物质含量较高，约<span class="number">8</span><span class="preprocessor">%</span>~<span class="number">10</span><span class="preprocessor">%</span>，但钙、磷含量不高，甘蔗糖蜜又高于甜菜糖蜜。矿物元素中钾、氯、钠、镁含量高，因此糖蜜具有轻泻性。
</code></pre><p>排毒水</p>
<pre><code>做法：新鲜小麦草汁（从30-50毫升开始）或大麦苗粉（1大匙）、糖蜜（Molasses）一大匙、有机柠檬汁（1-2个）或有机水果醋（如苹果、菠萝、柠檬）6-10毫升、水300毫升（冷或温开水）或回春水，均匀混合即完成。

说明：每天2-3次，于空腹时饮用。体质虚寒的人，可加三宝粉（1-2大匙）饮用。

三宝粉指胚芽（如小麦胚芽、糙米胚芽）、大豆卵磷脂以及酵母（如啤酒酵母）。
</code></pre></div><footer class="post__foot u-cf"><a href="/2013/07/19/w/e7-b3-96-e8-9c-9c-ef-bc-8c-e4-bb-80-e4-b9-88-e6-a0-b7-e7-9a-84-e7-ba-a2-e7-b3-96-e5-a5-bd-ef-bc-8c-e7-b3-96-e7-9f-a5-e8-af-86-e7-a7-91-e6-99-ae-ef-bc-8c-e6-9d-a5-e8-87-aa-e4-ba-92-e8-81-94-e7-bd-91/#comments" class="post__foot-link u-fr">评论</a></footer></article><article class="post"><header class="post__head"><time datetime="2013-07-18T03:12:53.000Z" class="post__time">七月 18, 2013</time><h1 class="post__title"><a href="/2013/07/18/w/centos-linux-e7-a6-81-e6-ad-a2-e5-92-8c-e5-bc-80-e5-90-afping/">centos Linux 禁止和开启ping</a></h1></header><div class="post__main"><p>禁止ping：</p>
<pre><code>echo <span class="number">1</span>  /<span class="keyword">proc</span>/sys/net/ipv4/icmp_echo_ignore_all
</code></pre><p>允许ping：</p>
<pre><code>echo <span class="number">0</span>  /<span class="keyword">proc</span>/sys/net/ipv4/icmp_echo_ignore_all

防火墙/etc/sysconfig/iptables添加

-A <span class="type">INPUT</span> -p icmp -m icmp --icmp-<span class="keyword">type</span> echo-request -m state --state <span class="type">NEW</span> -j <span class="type">ACCEPT</span>
</code></pre><p>/etc/init.d/iptables restart</p>
<p>iptables -L -nv</p>
<pre><code><span class="number">7</span> <span class="number">588</span> ACCEPT icmp -- * * <span class="number">0.0</span>.<span class="number">0.0</span>/<span class="number">0</span> <span class="number">0.0</span>.<span class="number">0.0</span>/<span class="number">0</span> <span class="keyword">state</span> NEW icmp type <span class="number">8</span>
</code></pre></div><footer class="post__foot u-cf"><a href="/2013/07/18/w/centos-linux-e7-a6-81-e6-ad-a2-e5-92-8c-e5-bc-80-e5-90-afping/#comments" class="post__foot-link u-fr">评论</a></footer></article><article class="post"><header class="post__head"><time datetime="2013-07-16T08:27:42.000Z" class="post__time">七月 16, 2013</time><h1 class="post__title"><a href="/2013/07/16/w/centos-6-4-x86-64-e5-ae-89-e8-a3-85php5-5-apache2-2-15-mysql5-5-32/">centos 6.4 x86_64安装php5.5 apache2.2.15 mysql5.5.32</a></h1></header><div class="post__main"><p> 安装centos 6.4 x86_64，选最小化安装，参考<a href="http://veryi.com/w/273.html。" target="_blank" rel="external">http://veryi.com/w/273.html。</a></p>
<p>升级一下：</p>
<pre><code># yum <span class="keyword">update</span> -<span class="literal">y</span>
</code></pre><h1 id="cat_/etc/issue-net">cat /etc/issue.net</h1><pre><code>CentOS release <span class="number">6.4</span> (Final)

Kernel <span class="string">\r</span> <span class="literal">on</span> an <span class="string">\m</span>

<span class="comment"># uname -a</span>

Linux veryi.com <span class="number">2.6</span>.<span class="number">32</span>-<span class="number">358.11</span>.<span class="number">1.el</span>6.x86_64 <span class="comment">#1 SMP Wed Jun 12 03:34:52 UTC 2013 x86_64 x86_64 x86_64 GNU/Linux</span>
</code></pre><h1 id="yum_install_vim_-y">yum install vim -y</h1><p>vim /etc/sysconfig/iptables</p>
<pre><code># Firewall configuration written by system-config-firewall

# Manual customization of this file is not recommended.

<span class="strong">*filter

</span><span class="attribute">:INPUT ACCEPT [0:0]</span>

<span class="attribute">:FORWARD ACCEPT [0:0]</span>

<span class="attribute">:OUTPUT ACCEPT [0:0]</span>

-A INPUT -m state --state ESTABLISHED,RELATED -j ACCEPT

-A INPUT -p icmp -j ACCEPT

-A INPUT -i lo -j ACCEPT

-A INPUT -m state --state NEW -m tcp -p tcp --dport 80 -j ACCEPT

-A INPUT -m state --state NEW -m tcp -p tcp --dport 22 -j ACCEPT

-A INPUT -j REJECT --reject-with icmp-host-prohibited

-A FORWARD -j REJECT --reject-with icmp-host-prohibited

COMMIT
</code></pre><p>重启</p>
<pre><code><span class="regexp">/etc/i</span>nit.d<span class="regexp">/iptables restart</span>
</code></pre><p>vi /etc/selinux/config</p>
<pre><code>安装mysql

yum install wget <span class="attribute">-y</span>

wget http:<span class="comment">//www.mysql.com/get/Downloads/MySQL-5.5/mysql-5.5.32-linux2.6-x86_64.tar.gz/from/http://cdn.mysql.com/</span>

tar <span class="attribute">-C</span> /usr/<span class="built_in">local</span> <span class="attribute">-xzf</span> mysql<span class="subst">-</span><span class="number">5.5</span><span class="built_in">.32</span><span class="attribute">-linux2</span><span class="built_in">.6</span><span class="attribute">-x86_64</span><span class="built_in">.</span>tar<span class="built_in">.</span>gz

cd /usr/<span class="built_in">local</span>

ln <span class="attribute">-s</span> mysql<span class="subst">-</span><span class="number">5.5</span><span class="built_in">.32</span><span class="attribute">-linux2</span><span class="built_in">.6</span><span class="attribute">-x86_64</span><span class="subst">/</span> mysql

cd /usr/<span class="built_in">local</span>/mysql

mkdir <span class="attribute">-p</span> /usr/<span class="built_in">local</span>/mysql/etc<span class="subst">/</span>

cp support<span class="attribute">-files</span>/my<span class="attribute">-innodb</span><span class="attribute">-heavy</span><span class="subst">-</span><span class="number">4</span>G<span class="built_in">.</span>cnf etc/my<span class="built_in">.</span>cnf

mv /etc/my<span class="built_in">.</span>cnf ~/my<span class="built_in">.</span>cnf<span class="subst">-</span><span class="string">`date +%F`</span>

mv /etc/rc<span class="built_in">.</span>d/init<span class="built_in">.</span>d/mysqld ~/mysqld<span class="subst">-</span><span class="string">`date +%F`</span>

cd /usr/<span class="built_in">local</span>/mysql/etc<span class="subst">/</span>

sed <span class="attribute">-i</span> <span class="subst">&amp;</span><span class="variable">#39</span>;s/max_connect_errors <span class="subst">=</span> <span class="number">10</span>/max_connect_errors <span class="subst">=</span> <span class="number">1000</span><span class="subst">/</span><span class="subst">&amp;</span><span class="variable">#39</span>; my<span class="built_in">.</span>cnf

sed <span class="attribute">-i</span> <span class="subst">&amp;</span><span class="variable">#39</span>;s/default<span class="attribute">-storage</span><span class="attribute">-engine</span> <span class="subst">=</span> MYISAM<span class="subst">/</span><span class="variable">#default</span><span class="attribute">-storage</span><span class="attribute">-engine</span> <span class="subst">=</span> MYISAM<span class="subst">/</span><span class="subst">&amp;</span><span class="variable">#39</span>; my<span class="built_in">.</span>cnf

sed <span class="attribute">-i</span> <span class="subst">&amp;</span><span class="variable">#39</span>;s/tmp_table_size <span class="subst">=</span> <span class="number">64</span>M<span class="subst">/</span><span class="variable">#tmp_table_size</span> <span class="subst">=</span> <span class="number">64</span>M<span class="subst">/</span><span class="subst">&amp;</span><span class="variable">#39</span>; my<span class="built_in">.</span>cnf

sed <span class="attribute">-i</span> <span class="subst">&amp;</span><span class="variable">#39</span>;s/innodb_flush_log_at_trx_commit <span class="subst">=</span> <span class="number">1</span><span class="subst">/</span><span class="variable">#innodb_flush_log_at_trx_commit</span> <span class="subst">=</span> <span class="number">1</span><span class="subst">/</span><span class="subst">&amp;</span><span class="variable">#39</span>; my<span class="built_in">.</span>cnf

sed <span class="attribute">-i</span> <span class="subst">&amp;</span><span class="variable">#39</span>;s/max_allowed_packet <span class="subst">=</span> <span class="number">1</span>M<span class="subst">/</span><span class="variable">#max_allowed_packet</span> <span class="subst">=</span> <span class="number">1</span>M<span class="subst">/</span><span class="subst">&amp;</span><span class="variable">#39</span>; my<span class="built_in">.</span>cnf

sed <span class="attribute">-i</span> <span class="subst">&amp;</span><span class="variable">#39</span>;s/<span class="keyword">skip</span><span class="attribute">-locking</span>/<span class="keyword">skip</span><span class="attribute">-external</span><span class="attribute">-locking</span><span class="subst">/</span><span class="subst">&amp;</span><span class="variable">#39</span>; my<span class="built_in">.</span>cnf

sed <span class="attribute">-i</span> <span class="subst">&amp;</span><span class="variable">#39</span>;s/default<span class="attribute">-character</span><span class="attribute">-set</span>/character<span class="attribute">-set</span><span class="attribute">-server</span><span class="subst">/</span><span class="subst">&amp;</span><span class="variable">#39</span>; my<span class="built_in">.</span>cnf

sed <span class="attribute">-i</span> <span class="subst">&amp;</span><span class="variable">#39</span>;s/log_slow_queries/slow_query_log<span class="subst">/</span><span class="subst">&amp;</span><span class="variable">#39</span>; my<span class="built_in">.</span>cnf

sed <span class="attribute">-i</span> <span class="subst">&amp;</span><span class="variable">#39</span>;<span class="subst">/</span><span class="subst">\</span><span class="preprocessor">[</span>mysqldump<span class="subst">\</span><span class="preprocessor">]</span><span class="markup">/i\

character-set-server=utf8 \

#innodb_file_per_table=1 \

expire_logs_days = 60 \

innodb_flush_log_at_trx_commit=0 \

innodb_flush_method=O_DIRECT \

innodb_data_home_dir = /opt/data/mysql/ \

innodb_log_group_home_dir = /opt/data/mysql/ \

#tmp_table_size = 512M \

#max_heap_table_size=128M \

log-error=mysqld.log \

long_query_time = 2 \

&amp;#39; my.cnf</span>
</code></pre><p>vim my.cnf</p>
<p>/usr/sbin/groupadd -g 200 mysql</p>
<pre><code><span class="regexp">/usr/</span>sbin/useradd -u <span class="number">200</span> -g mysql mysql

mkdir -p <span class="regexp">/opt/</span>data<span class="regexp">/mysql/</span>

chown mysql.mysql <span class="regexp">/opt/</span>data<span class="regexp">/mysql/</span>

cd <span class="regexp">/usr/</span>local<span class="regexp">/mysql/</span>

scripts/mysql_install_db --user=mysql

chown -R root .

chown -R mysql data

chgrp -R mysql .

cd <span class="regexp">/opt/</span>data<span class="regexp">/mysql/</span>

chown mysql.mysql <span class="regexp">/opt/</span>data<span class="regexp">/mysql/</span>

cd <span class="regexp">/usr/</span>local<span class="regexp">/mysql/</span>

\cp support-files<span class="regexp">/mysql.server /</span>etc<span class="regexp">/init.d/</span>mysqld

chmod +x <span class="regexp">/etc/</span>init.d/mysqld

<span class="regexp">/etc/</span>init.d/mysqld restart

<span class="regexp">/sbin/</span>chkconfig --add mysqld

<span class="regexp">/sbin/</span>chkconfig --list mysqld

echo <span class="regexp">/usr/</span>local<span class="regexp">/mysql/</span>lib  <span class="regexp">/etc/</span>ld.so.conf

cat <span class="regexp">/etc/</span>ld.so.conf

ldconfig

mkdir -p <span class="regexp">/var/</span>lib<span class="regexp">/mysql/</span>

ln -s <span class="regexp">/tmp/</span>mysql.sock <span class="regexp">/var/</span>lib<span class="regexp">/mysql/</span>mysql.sock

ln -s <span class="regexp">/tmp/</span>mysql.sock <span class="regexp">/var/</span>run<span class="regexp">/mysqld/</span>mysqld.sock

mkdir -p <span class="regexp">/var/</span>run<span class="regexp">/mysqld/</span>

chown mysql <span class="regexp">/var/</span>run<span class="regexp">/mysqld/</span>

echo pathmunge <span class="regexp">/usr/</span>local<span class="regexp">/mysql/</span>bin after  <span class="regexp">/etc/</span>profile.d/mysql.sh

. <span class="regexp">/etc/</span>profile

<span class="regexp">/usr/</span>local<span class="regexp">/mysql/</span>bin/mysqladmin -u root password &amp;#<span class="number">39</span>;veryi.com&amp;#<span class="number">39</span>;

<span class="regexp">/usr/</span>local<span class="regexp">/mysql/</span>bin/mysql -u root -veryi.com
</code></pre><p>Welcome to the MySQL monitor. Commands end with ; or \g.</p>
<pre><code>Your MySQL connection <span class="property">id</span> <span class="keyword">is</span> <span class="number">13</span>

Server <span class="property">version</span>: <span class="number">5.5</span>.32-<span class="command">log</span> MySQL Community Server (GPL)
</code></pre><p>mysql \s</p>
<hr>
<pre><code><span class="regexp">/usr/</span>local<span class="regexp">/mysql/</span>bin/mysql Ver <span class="number">14.14</span> Distrib <span class="number">5.5</span>.32, <span class="keyword">for</span> linux2.6 (x86_64) using readline <span class="number">5.1</span>
</code></pre><p>安装php5.5 httpd2.2.15，添加yum源：</p>
<pre><code>rpm -Uvh <span class="string">http:</span><span class="comment">//mirrors.sohu.com/fedora-epel/6/x86_64/epel-release-6-8.noarch.rpm</span>

rpm -Uvh <span class="string">http:</span><span class="comment">//rpms.famillecollet.com/enterprise/remi-release-6.rpm</span>

yum repolist
</code></pre><p>yum —enablerepo=remi,remi-test install httpd php php-common -y</p>
<p>php -v</p>
<pre><code>PHP 5.5.0 (<span class="keyword">cli</span>) (built: Jul 12 2013 19:03:02)

<span class="keyword">Copyright</span> (c) 1997-2013 The PHP <span class="literal">Group</span>

Zend Engine v2.5.0-dev, <span class="keyword">Copyright</span> (c) 1998-2013 Zend Technologies
</code></pre><p>httpd -v</p>
<pre><code>Server <span class="property">version</span>: Apache/<span class="number">2.2</span>.15 (Unix)
</code></pre><p>设置自启动：</p>
<p>chkconfig —list httpd</p>
<pre><code>chkconfig <span class="comment">--level 345 httpd on</span>

chkconfig <span class="comment">--list mysqld</span>
</code></pre><p>vim /etc/httpd/conf/httpd.conf</p>
<pre><code><span class="regexp">/etc/i</span>nit.d<span class="regexp">/httpd restart</span>
</code></pre><p>cd /var/www/</p>
<pre><code>chown apache.apache html/ -<span class="literal">R</span>

安装php扩展

yum --noplugins --enablerepo=remi,remi-<span class="keyword">test</span> install php-pecl-apc php-<span class="keyword">cli</span> php-pear php-pdo php-mysql php-pgsql php-pecl-mongo php-sqlite php-pecl-memcache php-pecl-memcached php-gd php-mbstring php-mcrypt php-xml -<span class="literal">y</span>

/etc/init.<span class="keyword">d</span>/httpd restart
</code></pre><p>QA：</p>
<pre><code>yum通过代理升级：

export http_proxy=http://yum-<span class="keyword">user</span>:<span class="literal">proxy</span>-<span class="literal">pass</span>@mycache.veryi.com:<span class="number">3128</span>
</code></pre><p>装了epel的扩展后，执行yum报错：</p>
<pre><code><span class="string">Error:</span> Cannot retrieve metalink <span class="keyword">for</span> <span class="string">repository:</span> epel. Please verify its path and <span class="keyword">try</span> again

编辑<span class="regexp">/etc/</span>yum.repos.d/epel.repo，做如下改动，取消http行的注释（https行可不注释）：

baseurl=<span class="string">http:</span><span class="comment">//download.fedoraproject.org/pub/epel/6/$basearch</span>

#mirrorlist=<span class="string">https:</span><span class="comment">//mirrors.fedoraproject.org/metalink?repo=epel-6arch=$basearch</span>
</code></pre></div><footer class="post__foot u-cf"><a href="/2013/07/16/w/centos-6-4-x86-64-e5-ae-89-e8-a3-85php5-5-apache2-2-15-mysql5-5-32/#comments" class="post__foot-link u-fr">评论</a></footer></article><article class="post"><header class="post__head"><time datetime="2013-06-17T03:24:31.000Z" class="post__time">六月 17, 2013</time><h1 class="post__title"><a href="/2013/06/17/w/e5-bf-98-e8-ae-b0discuz-e7-ae-a1-e7-90-86-e5-91-98admin-e5-af-86-e7-a0-81-e5-92-8c-e5-ae-89-e5-85-a8-e6-8f-90-e9-97-ae-e7-9a-84-e8-a7-a3-e5-86-b3-e5-8a-9e-e6-b3-95/">忘记Discuz管理员admin密码和安全提问的解决办法</a></h1></header><div class="post__main"><p> 在网站根目录下的子目录uc_server/data中打开找到文件config.inc.php以及config/config_global.php、config/config_ucenter.php （这两个如果没有下面代码可以不用修改）</p>
<p>vim uc_server/data/config.inc.php</p>
<pre><code>vim config/config_global<span class="built_in">.</span>php

vim config/config_ucenter<span class="built_in">.</span>php

找到类似以下代码：

<span class="class"><span class="keyword">define</span></span>(<span class="subst">&amp;</span><span class="variable">#39</span>;UC_FOUNDERPW<span class="subst">&amp;</span><span class="variable">#39</span>;,<span class="subst">&amp;</span><span class="variable">#39</span>;<span class="number">256955</span>f2e034sad74f0e2953572ea360<span class="subst">&amp;</span><span class="variable">#39</span>;);

<span class="class"><span class="keyword">define</span></span>(<span class="subst">&amp;</span><span class="variable">#39</span>;UC_FOUNDERSALT<span class="subst">&amp;</span><span class="variable">#39</span>;,<span class="subst">&amp;</span><span class="variable">#39</span>;<span class="number">217804</span><span class="subst">&amp;</span><span class="variable">#39</span>;);
</code></pre><p>然后用以下代码替换</p>
<pre><code><span class="class"><span class="keyword">define</span></span>(<span class="subst">&amp;</span><span class="variable">#39</span>;UC_FOUNDERPW<span class="subst">&amp;</span><span class="variable">#39</span>;,<span class="subst">&amp;</span><span class="variable">#39</span>;<span class="number">047099</span>adb883dc19616dae0ef2adc5b6<span class="subst">&amp;</span><span class="variable">#39</span>;);

<span class="class"><span class="keyword">define</span></span>(<span class="subst">&amp;</span><span class="variable">#39</span>;UC_FOUNDERSALT<span class="subst">&amp;</span><span class="variable">#39</span>;,<span class="subst">&amp;</span><span class="variable">#39</span>;<span class="number">311254</span><span class="subst">&amp;</span><span class="variable">#39</span>;);

修改完后，Ucenter创始人的密码就变为: <span class="number">123456789</span> ，这时可以网址/uc_server/admin<span class="built_in">.</span>php登录到Ucenter里再把密码改为自己想要的就可以了。
</code></pre><p>安全提问config/config_global.php</p>
<pre><code>$admincp = <span class="keyword">array</span>();

$admincp[<span class="string">'forcesecques'</span>] = <span class="number">0</span>; <span class="comment">// 管理人员必须设置安全提问才能进入系统设置, 0=否, 1=是[安全]</span>

$admincp[<span class="string">'checkip'</span>] = <span class="number">1</span>; <span class="comment">// 后台管理操作是否验证管理员的 IP, 1=是[安全], 0=否。仅在管理员无法登陆后台时设置 0。</span>

$admincp[<span class="string">'tpledit'</span>] = <span class="number">0</span>; <span class="comment">// 是否允许在线编辑论坛模板 1=是 0=否[安全]</span>

$admincp[<span class="string">'runquery'</span>] = <span class="number">1</span>; <span class="comment">// 是否允许后台运行 SQL 语句 1=是 0=否[安全]</span>

$admincp[<span class="string">'dbimport'</span>] = <span class="number">1</span>; <span class="comment">// 是否允许后台恢复论坛数据 1=是 0=否[安全]</span>



以下测试无效：

<span class="keyword">select</span> * <span class="keyword">from</span> bbs_ucenter_members <span class="keyword">where</span> username=&amp;<span class="string">#39</span>;admin&amp;<span class="string">#39</span>;;

update bbs_ucenter_members <span class="keyword">set</span> password=md5(&amp;<span class="string">#39</span>;<span class="number">123456789</span>&amp;<span class="string">#39</span>;) <span class="keyword">where</span> username=&amp;<span class="string">#39</span>;admin&amp;<span class="string">#39</span>; ;
</code></pre></div><footer class="post__foot u-cf"><a href="/2013/06/17/w/e5-bf-98-e8-ae-b0discuz-e7-ae-a1-e7-90-86-e5-91-98admin-e5-af-86-e7-a0-81-e5-92-8c-e5-ae-89-e5-85-a8-e6-8f-90-e9-97-ae-e7-9a-84-e8-a7-a3-e5-86-b3-e5-8a-9e-e6-b3-95/#comments" class="post__foot-link u-fr">评论</a></footer></article></main><aside class="site-aside"><div class="widget about"><div class="b"><div class="info u-cf"><img src="/avatar.jpg"><div class="text"> <p>dayu graceful</p><p>vegan</p><p>linux sysadm</p><p> <a href="http://www.weibo.com/vegetablegrain" title="wiebo" class="weibo ico"></a><a href="http://user.qzone.qq.com/13467/main" title="qq" class="qq ico"></a></p></div></div></div></div><div class="widget tags"><div class="h">categories</div><div class="b"> <ul><li><a href="/categories/计算机/">计算机</a><small>(138)</small></li><li><a href="/categories/佛法传统文化/">佛法传统文化</a><small>(18)</small></li><li><a href="/categories/健康/">健康</a><small>(12)</small></li><li><a href="/categories/学习/">学习</a><small>(2)</small></li><li><a href="/categories/default/">default</a><small>(1)</small></li><li><a href="/categories/健康之道/">健康之道</a><small>(1)</small></li><li><a href="/categories/网络/">网络</a><small>(1)</small></li><li><a href="/categories/recreation/">recreation</a><small>(1)</small></li></ul></div></div><div class="widget links"><div class="h">links</div><div class="b"> <ul><li><a href="http://www.enzymesos.com/">酵素Enzyme救地球</a></li><li><a href="http://www.osalt.com/">商业软件的开源替代品</a></li></ul></div></div></aside></section><footer class="site-foot"><div class="inner"><div class="site-copy u-fl">© 2015 dayu<bdi> ❤ Theme by <a href="http://riny.net" target="_blank">Bubblings</a></bdi></div><menu class="page-menu u-fr"><li class="page-menu__item"><a title="Previous" href="/page/4/" class="page-menu__link icon-arrow-left">prev</a></li><li class="page-menu__item"><a title="Next" href="/page/6/" class="page-menu__link icon-arrow-right">next</a></li></menu></div></footer><div id="back-top" title="返回顶部"></div><script src="/js/script.js"></script></body></html>