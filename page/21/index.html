<!DOCTYPE html><html><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="description" content="kindquiet"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="alternative" href="/atom.xml" title="kindquiet素食勤俭敬老孝慈" type="application/atom+xml"><link rel="icon" href="/favicon.ico"><title>kindquiet素食勤俭敬老孝慈</title><meta name="keywords" content="centos,素食"><meta name="description" content="kindquiet素食勤俭敬老孝慈"><script>var _hmt = _hmt || [];(function() {  var hm = document.createElement("script");  hm.src = "//hm.baidu.com/hm.js?33ec0e4a308e2f174e68f15c700d8b5d";  var s = document.getElementsByTagName("script")[0];   s.parentNode.insertBefore(hm, s);})();</script><link rel="stylesheet" href="/css/style.css" type="text/css"><!--[if lt IE 9]><script>(function(a,b){a="abbr article aside audio bdi canvas data datalist details dialog figcaption figure footer header hgroup main mark meter nav output progress section summary template time video".split(" ");for(b=a.length-1;b>=0;b--)document.createElement(a[b])})()</script><![endif]--></head><body><header class="site-head"><div class="inner"><h1 class="site-title u-fl"><a href="/">kindquiet素食勤俭敬老孝慈</a></h1><nav class="site-nav u-fr"><ul class="site-nav__list"><li class="site-nav__item"><a href="/" class="site-nav__link">Home</a></li><li class="site-nav__item"><a href="/archives" class="site-nav__link">Archives</a></li></ul></nav></div></header><section class="site-content"><main class="site-main"><article class="post"><header class="post__head"><time datetime="2010-07-29T10:45:39.000Z" class="post__time">七月 29, 2010</time><h1 class="post__title"><a href="/2010/07/29/w/centos-e7-b3-bb-e7-bb-9f-e7-94-a8cacti-e7-9b-91-e6-8e-a7memcached/">centos系统用cacti监控memcached</a></h1></header><div class="post__main"><p>安装Python支持：</p>
<pre><code>yum install python-setuptools

下载安装python <span class="keyword">for</span> memecached api,<span class="type">Python</span> <span class="type">Client</span> <span class="type">API</span> <span class="type">Installation</span>:

地址：

http://dealnews.com/developers/cacti/memcached.html

tar xzf python-memcached-ver.tar.gz.

python setup.py install

模板安装,<span class="type">Template</span> <span class="type">Installation</span>:

下载 cacti-memcached-.tar.gz

tar xzf cacti-memcached-ver.tar.gz

<span class="type">Copy</span> (<span class="keyword">or</span> upload) the memcached.py script to the cacti path/scripts/ directory on the server that cacti <span class="keyword">is</span> installed on.

[optional]  <span class="type">Verify</span> that the memcached.py script properly works by opening a console <span class="keyword">or</span> ssh connection to the server <span class="keyword">and</span> typing:

 python cacti path/scripts/memcached.py hostname

导入模板cacti_memcached_host_template.xml：

<span class="type">Open</span> <span class="keyword">and</span> login to your cacti installation&amp;<span class="comment">#39;s console in your web browser and choose Import Templates from the menu on the left.</span>

<span class="type">In</span> the <span class="type">Import</span> <span class="type">Templates</span> section, click the <span class="type">Browse</span> button to <span class="type">Import</span> <span class="type">Template</span> <span class="keyword">from</span> <span class="type">Local</span> <span class="type">File</span>. <span class="type">Navigate</span> to the directory where you extracted this <span class="keyword">template</span> <span class="keyword">and</span> choose the cacti_memcached_host_template.xml file to be imported.

<span class="type">Click</span> the <span class="type">Save</span> button to <span class="keyword">import</span> the <span class="keyword">template</span>.
</code></pre></div><footer class="post__foot u-cf"><a href="/2010/07/29/w/centos-e7-b3-bb-e7-bb-9f-e7-94-a8cacti-e7-9b-91-e6-8e-a7memcached/#comments" class="post__foot-link u-fr">评论</a></footer></article><article class="post"><header class="post__head"><time datetime="2010-07-23T03:36:17.000Z" class="post__time">七月 23, 2010</time><h1 class="post__title"><a href="/2010/07/23/w/e5-8d-95-e6-a8-a1-e5-85-89-e7-ba-a4-e5-a4-9a-e6-a8-a1-e5-85-89-e7-ba-a4/">单模光纤多模光纤和光纤跳线</a></h1></header><div class="post__main"><p>光纤跳线用来做从设备到光纤布线链路的跳接线。有较厚的保护层，一般用在光端机和终端盒之间的连接。san光存储需要光纤网络布线，必须区分清除光纤的种类。</p>
<pre><code>光纤跳线主要分为两类：

单模光纤(Single-<span class="built_in">mode</span> Fiber)：一般光纤跳线用黄色表示，接头和保护套为蓝色；传输距离较长。

多模光纤(Multi-<span class="built_in">mode</span> Fiber)：一般光纤跳线用橙色表示，也有的用灰色表示，接头和保护套用米色或者黑色；传输距离较短。
</code></pre><p>配置：LC-LC光纤跳线、SC-SC光纤跳线、FC-FC光纤跳线、ST-ST光纤跳线</p>
<pre><code>混合配置：LC-SC、ST-FC、SC- ST、FC-SC、LC-FC、ST-LC等

光纤分类

 光纤按光在其中的传输模式可分为单模和多模。多模光纤的纤芯直径为<span class="number">50</span>或<span class="number">62.5</span><span class="keyword">m</span>，包层外径<span class="number">125</span><span class="keyword">m</span>，表示为<span class="number">50</span>/<span class="number">125</span><span class="keyword">m</span>或<span class="number">62.5</span> /<span class="number">125</span><span class="keyword">m</span>。单模光纤的纤芯直径为<span class="number">8.3</span><span class="keyword">m</span>，包层外径<span class="number">125</span><span class="keyword">m</span>，表示为<span class="number">8.3</span>/<span class="number">125</span><span class="keyword">m</span>。 

 光纤的工作波长有短波<span class="number">850</span><span class="keyword">nm</span>、长波<span class="number">1310</span><span class="keyword">nm</span>和<span class="number">1550</span><span class="keyword">nm</span>。光纤损耗一般是随波长增加而减小，<span class="number">850</span><span class="keyword">nm</span>的损耗一般为 <span class="number">2.5</span>dB/km,<span class="number">1.31</span><span class="keyword">m</span>的损耗一般为<span class="number">0.35</span>dB/km，<span class="number">1.55</span><span class="keyword">m</span>的损耗一般为<span class="number">0.20</span>dB/km，这是光纤的最低损耗，波长<span class="number">1.65</span><span class="keyword">m</span>以上的损耗趋向加大。由于OHˉ(水峰)的吸收作用，<span class="number">900</span>~<span class="number">1300</span><span class="keyword">nm</span>和<span class="number">1340</span><span class="keyword">nm</span>~<span class="number">1520</span><span class="keyword">nm</span>范围内都有损耗高峰，这两个范围未能充分利用。

多模光缆

 多模光纤(MultiModeFiber)-芯较粗(<span class="number">50</span>或<span class="number">62.5</span><span class="keyword">m</span>)，可传多种模式的光。但其模间色散较大，这就限制了传输数字信号的频率，而且随距离的增加会更加严重。因此，多模光纤传输的距离就比较近，一般只有几公里。

单模光缆

 单模光纤(SingleModeFiber)：中心纤芯很细(芯径一般为<span class="number">9</span>或<span class="number">10</span><span class="keyword">m</span>)，只能传一种模式的光。因此，其模间色散很小，适用于远程通讯，但还存在着材料色散和波导色散，这样单模光纤对光源的谱宽和稳定性有较高的要求，即谱宽要窄，稳定性要好。

 后来发现在<span class="number">1310</span><span class="keyword">nm</span>波长处，单模光纤的总色散为零。从光纤的损耗特性来看，<span class="number">1310</span><span class="keyword">nm</span>正好是光纤的一个低损耗窗口。这样，<span class="number">1310</span><span class="keyword">nm</span>波长区就成了光纤通信的一个很理想的工作窗口，也是现在实用光纤通信系统的主要工作波段。<span class="number">1310</span><span class="keyword">nm</span>常规单模光纤的主要参数是由国际电信联盟ITU-T在G652建议中确定的，因此这种光纤又称G652光纤。

 多模光纤的纤芯面积是单模的<span class="number">30</span>倍。多模光纤的大芯径明显的优点是可以保证较低的连接损耗，使光纤对光纤或者光纤对收发器连接时的损耗较低，非常适合企业网与局域网的应用情况。在网络总体成本中光收发器是除交换设备以外最昂贵的部分。交换设备是与光纤类型无关的部分，因此收发器成本成为影响方案总体成本的主要因素。DFB与FP激光器比LED与VCSEL要相对贵很多，但是它们可以提供较高的注入功率及高汇聚度的光束，允许将高功率的光束高效地耦合到细小的单模光纤芯。LED与VCSEL则为短距离应用提供相对便宜的解决方案。其中VCSEL拥有较大的有效区域(<span class="number">15</span>um)可以将束光有效地耦合到多模光纤较大的纤芯中去。而LED则只能提供较低的能量，但因其数值孔径很大，光斑直径也很大，可以覆盖住多模光纤的整个端面，也比较适合多模光纤应用。因此，为了得益于VCSEL与LED的低成本，必须配合使用多模光纤，才能获得最佳的光耦合效率。



光纤使用注意事项：

光纤跳线两端的光模块的收发波长必须一致，也就是说光纤的两端必须是相同波长的光模块，简单的区分方法是光模块的颜色要一致。

一般的情况下，短波光模块使用多模光纤（橙色的光纤），长波光模块使用单模光纤（黄色光纤），以保证数据传输的准确性。

光纤在使用中不要过度弯曲和绕环，这样会增加光在传输过程的衰减。

光纤跳线使用后一定要用保护套将光纤接头保护起来，灰尘和油污会损害光纤的耦合。
</code></pre><p>优质光纤跳线特点:</p>
<pre><code>1.插入损耗低

2.重复性好

3.回波损耗大

4.互插性能好

5.温度稳定性好

常用的连接器： LC（小头型）、<span class="keyword">SC</span>（大头型）、FC（螺旋口）、<span class="keyword">ST</span>（卡式口）

光收发一体模块(SFP GBIC XFP)由光电子器件、功能电路和光接口等组成，光电子器件包括发射和接收两部分。发射部分是：输入一定码率的电信号经内部的驱动芯片处理后驱动半导体激光器（LD）或发光二极管（LED）发射出相应速率的调制光信号，其内部带有光功率自动控制电路，使输出的光信号功率保持稳定。接收部分是：一定码率的光信号输入模块后由光探测二极管转换为电信号。经前置放大器后输出相应码率的电信号，输出的信号一般为PECL电平。同时在输入光功率小于一定值后会输出一个告警信号。

光收发一体模块分类

按照速率分：以太网应用的100Base（百兆）、1000Base（千兆）、10GE；SDH应用的155M、622M、2.5G、10G 。

按照封装分：19、SFF、SFP、GBIC、XENPAK、XFP

19封装焊接型光模块，一般速度不高于千兆，多采用<span class="keyword">SC</span>接口；

SFF封装:焊接小封装光模块，一般速度不高于千兆，多采用LC接口；

GBIC封装热插拔千兆接口光模块，采用<span class="keyword">SC</span>接口；

SFP封装热插拔小封装模块，目前最高数率可达4G，多采用LC接口；

XENPAK封装应用在万兆以太网，采用<span class="keyword">SC</span>接口；

XFP封装10G光模块，可用在万兆以太网，SONET等多种系统，多采用LC接口；

按照激光类型分：LED、VCSEL、FP LD、DFB <span class="keyword">L</span> 。

按照发射波长分：850nm、1310nm、1550nm等等。

按照使用方式分：非热插拔（19、SFF），可热插拔（GBIC、SFP、XENPAK、XFP）。

光纤连接器的分类和主要规格参数

光纤连接器是在一段光纤的两头都安装上连接头，主要作光配线使用。

按照光纤的类型分：单模光纤连接器（一般为<span class="keyword">G</span>.652纤：光纤内径9um，外径125um），多模光纤连接器。单模光纤和多模光纤可以从纤芯的尺寸大小来简单地判别。单模光纤的纤芯很小,约4～10um,只传输主模态。这样可完全避免了模态色散，使得传输频带很宽，传输容量很大。这种光纤适用于大容量、长距离的光纤通信。它是未来光纤通信与光波技术发展的必然趋势。

多模光纤又分为多模突变型光纤和多模渐变型光纤。前者纤芯直径较大，传输模态较多，因而带宽较窄，传输容量较小；后者纤芯中折射率随着半径的增加而减少，可获得比较小的模态色散，因而频带较宽，传输容量较大，目前一般都应用后者。

由于多模光纤中不同模式光的传波速度不同，因此多模光纤的传输距离很短。而单模光纤就能用在无中继的光通讯上。

在光纤通信理论中，光纤有单模、多模之分，区别在于： 

1\. 单模光纤芯径小（10m <span class="keyword">m</span>左右），仅允许一个模式传输，色散小，工作在长波长（1310nm和1550nm），与光器件的耦合相对困难。

2\. 多模光纤芯径大（62.5m <span class="keyword">m</span>或50m <span class="keyword">m</span>），允许上百个模式传输，色散大，工作在850nm或1310nm。与光器件的耦合相对容易。研究表明，多模光纤的带宽大约为4000Mb/s。 制造的单模光纤是为了消除脉冲展宽

而对于光端模块来讲，严格的说并没有单模、多模之分。所谓单模、多模模块，指的是光端模块采用的光器件与何种光纤配合能获得最佳传输特性。一般有以下区别：

1\. 单模模块一般采用LD或光谱线较窄的LED作为光源，耦合部件尺寸与单模光纤配合好，使用单模光纤传输时能传输较远距离。

2\. 多模模块一般采用价格较低的LED作为光源，耦合部件尺寸与多模光纤配合好。

按照光纤连接器的连接头形式分：FC，<span class="keyword">SC</span>，<span class="keyword">ST</span>，LC，MU，MTRJ等等，目前常用的有FC，<span class="keyword">SC</span>，<span class="keyword">ST</span>，LC

FC型最早由日本NTT研制。外部加强件采用金属套，紧固方式为螺丝扣。测试设备选用该种接头较多。

<span class="keyword">SC</span>型由日本NTT公司开发的模塑插拔耦合式连接器。其外壳采用模塑工艺，用铸模玻璃纤维塑料制成，呈矩形；插针由精密陶瓷制成，耦合套筒为金属开缝套管结构。紧固方式采用插拔销式，不需要旋转。

LC型朗讯公司设计的。套管外径为1.25mm，是通常采用的FC-<span class="keyword">SC</span>、<span class="keyword">ST</span>套管外径2.5mm的一半。提高连接器的应用密度。

按照光纤连接器连接头内插针端面分：PC，SPC，UPC，APC

按照光纤连接器的直径分：&amp;Phi;3，&amp;Phi;2, &amp;Phi;0.9

光纤连接器的性能主要有光学性能、互换性能、机械性能、环境性能和寿命。其中最重要的是插入损耗和回波损耗这两个指标。

1、 光模块传输数率：百兆、千兆、10GE等等。

2、 光模块发射光功率和接收灵敏度：发射光功率指发射端的光强，接收灵敏度指可以探测到的光强度。两者都以dBm为单位，是影响传输距离的重要参数。光模块可传输的距离主要受到损耗和色散两方面受限。损耗限制可以根据公式：损耗受限距离＝（发射光功率-接收灵敏度）/光纤衰减量 来估算。光纤衰减量和实际选用的光纤相关。一般目前的<span class="keyword">G</span>.652光纤可以做到1310nm波段0.5dB/km，1550nm波段0.3dB/km甚至更佳。50um多模光纤在850nm波段4dB/km 1310nm波段2dB/km。对于百兆、千兆的光模块色散受限远大于损耗受限，可以不作考虑。

3、 10GE光模块遵循802.3ae的标准，传输的距离和选用光纤类型、光模块光性能相关。

4、 饱和光功率值指光模块接收端最大可以探测到的光功率，一般为-3dBm。当接收光功率大于饱和光功率的时候同样会导致误码产生。因此对于发射光功率大的光模块不加衰减回环测试会出现误码现象。

光模块功能失效重要原因

光模块功能失效分为发射端失效和接收端失效，分析具体原因，最常出现的问题集中在以下几个方面：

1． 光口污染和损伤

由于光接口的污染和损伤引起光链路损耗变大，导致光链路不通。产生的原因有：

A． 光模块光口暴露在环境中，光口有灰尘进入而污染；

B． 使用的光纤连接器端面已经污染，光模块光口二次污染；

C． 带尾纤的光接头端面使用不当，端面划伤等；
</code></pre><p> GBIC是Giga Bitrate Interface Converter的缩写，是将千兆位电信号转换为光信号的接口器件。GBIC设计上可以为热插拔使用。GBIC是一种符合国际标准的可互换产品。采用 GBIC接口设计的千兆位交换机由于互换灵活，在市场上占有较大的市场分额。</p>
<p> SFP是Small Form-Factor Pluggable的缩写，可以简单的理解为GBIC的升级版本。SFP模块体积比GBIC模块减少一半，可以在相同的面板上配置多出一倍以上的端口数 量。SFP模块的其他功能基本和GBIC一致。</p>
</div><footer class="post__foot u-cf"><a href="/2010/07/23/w/e5-8d-95-e6-a8-a1-e5-85-89-e7-ba-a4-e5-a4-9a-e6-a8-a1-e5-85-89-e7-ba-a4/#comments" class="post__foot-link u-fr">评论</a></footer></article><article class="post"><header class="post__head"><time datetime="2010-07-21T01:15:29.000Z" class="post__time">七月 21, 2010</time><h1 class="post__title"><a href="/2010/07/21/w/e4-bd-95-e6-97-b6-e7-b3-bb-e7-bb-9f-e7-9a-84-e8-ae-bf-e9-97-ae-e8-80-85-e6-9c-80-e5-b0-91/">何时系统的访问者最少</a></h1></header><div class="post__main"><p>是半夜子时12点吗？看下图就清楚了。同理，这也是电信系统维护割接通常不是在半夜进行，而是在凌晨4点，因为这个时刻，熬夜的睡了，早睡的在准备起。以下分别是日访问几千、几万、几十万独立ip的统计。</p>
<p><img src="http://veryi.com/w/wp-content/uploads/www_veryi_com(1" alt="">.png)</p>
<p><img src="http://veryi.com/w/wp-content/uploads/auto_veryi_com.png" alt=""></p>
<p><img src="http://veryi.com/w/wp-content/uploads/veryi_com.png" alt=""></p>
</div><footer class="post__foot u-cf"><a href="/2010/07/21/w/e4-bd-95-e6-97-b6-e7-b3-bb-e7-bb-9f-e7-9a-84-e8-ae-bf-e9-97-ae-e8-80-85-e6-9c-80-e5-b0-91/#comments" class="post__foot-link u-fr">评论</a></footer></article><article class="post"><header class="post__head"><time datetime="2010-07-15T02:30:00.000Z" class="post__time">七月 15, 2010</time><h1 class="post__title"><a href="/2010/07/15/w/cacti-e7-9b-91-e6-8e-a7monitormysql-innodb-e6-95-b0-e6-8d-ae-e5-ba-93/">cacti监控(monitor)mysql InnoDB 数据库</a></h1></header><div class="post__main"><p>目前最好用的监控mysql InnoDB 数据库的方法之一</p>
<pre><code>http:<span class="comment">//code.google.com/p/mysql-cacti-templates/</span>

wget http:<span class="comment">//mysql-cacti-templates.googlecode.com/files/better-cacti-templates-1.1.7.tar.gz</span>

tar <span class="attribute">-xzf</span> better<span class="attribute">-cacti</span><span class="attribute">-templates</span><span class="subst">-</span><span class="number">1.1</span><span class="built_in">.7</span><span class="built_in">.</span>tar<span class="built_in">.</span>gz <span class="attribute">-C</span> /usr/<span class="built_in">local</span>/src

cd /usr/<span class="built_in">local</span>/src/better<span class="attribute">-cacti</span><span class="attribute">-templates</span><span class="subst">-</span><span class="number">1.1</span><span class="built_in">.7</span>

cp scripts/ss_get_mysql_stats<span class="built_in">.</span>php /usr/<span class="built_in">local</span>/www/html/cacti/scripts

cd /usr/<span class="built_in">local</span>/www/html/cacti/scripts

vim ss_get_mysql_stats<span class="built_in">.</span>php

<span class="variable">$mysql_user</span> <span class="subst">=</span> <span class="subst">&amp;</span><span class="variable">#39</span>;cacti<span class="subst">&amp;</span><span class="variable">#39</span>;;

<span class="variable">$mysql_pass</span> <span class="subst">=</span> <span class="subst">&amp;</span><span class="variable">#39</span>;cacti<span class="subst">&amp;</span><span class="variable">#39</span>;;

<span class="variable">$mysql_port</span> <span class="subst">=</span> <span class="number">3306</span>;

设置准备监控的数据库的账户相关信息

创建监控Mysql需要的账户以及权限

配置MySQL服务器，让cacti所在机器能够访问MySQL服务器的状态信息，必须拥有process权限。如果要监控InnoDB状态，还必须有SUPER权限。

grant process,super <span class="keyword">on</span> <span class="subst">*</span><span class="built_in">.</span><span class="subst">*</span> <span class="keyword">to</span> <span class="subst">&amp;</span><span class="variable">#39</span>;cacti<span class="subst">&amp;</span><span class="variable">#39</span>;@<span class="subst">&amp;</span><span class="variable">#39</span>;<span class="subst">%&amp;</span><span class="variable">#39</span>; identified <span class="keyword">by</span> <span class="subst">&amp;</span><span class="variable">#39</span>;cacti<span class="subst">&amp;</span><span class="variable">#39</span>;;

flush privileges;

帐号测试：

cd /usr/<span class="built_in">local</span>/www/html/cacti/scripts

php <span class="attribute">-q</span> <span class="built_in">.</span>/ss_get_mysql_stats<span class="built_in">.</span>php <span class="subst">--</span>host <span class="number">10.88</span><span class="built_in">.1</span><span class="built_in">.134</span> <span class="subst">--</span>items cv,cx,cy,cz <span class="subst">--</span>user cacti <span class="subst">--</span>pass cacti <span class="subst">--</span>port <span class="number">3306</span>

模板导入（<span class="keyword">Import</span> Templates）

在cacti管理界面导入模板cacti_host_template_x_mysql_server_ht_0<span class="built_in">.8</span><span class="built_in">.6</span>i<span class="attribute">-sver1</span><span class="built_in">.1</span><span class="built_in">.7</span><span class="built_in">.</span><span class="built_in">xml</span>。

Now <span class="keyword">import</span> the template files through your web browser<span class="built_in">. </span><span class="keyword">In</span> the Cacti web interface<span class="subst">&amp;</span><span class="variable">#39</span>;s Console tab, click <span class="keyword">on</span> the <span class="keyword">Import</span> Templates <span class="keyword">link</span> <span class="keyword">in</span> the left sidebar<span class="built_in">. </span>Browse <span class="keyword">to</span> the directory containing the unpacked templates, <span class="keyword">select</span> the <span class="built_in">XML</span> file for the templates you<span class="subst">&amp;</span><span class="variable">#39</span>;re installing, <span class="literal">and</span> submit the form<span class="built_in">. </span><span class="keyword">In</span> our example, the file will be named something like cacti_host_template_x_mysql_server_ht_0<span class="built_in">.8</span><span class="built_in">.6</span>i<span class="attribute">-sver1</span><span class="built_in">.1</span><span class="built_in">.7</span><span class="built_in">.</span><span class="built_in">xml</span><span class="built_in">.

</span><span class="built_in">Data</span> Input Method

<span class="preprocessor">[</span>success<span class="preprocessor">]</span><span class="markup"> X Get MySQL Stats/MyISAM Indexes IM </span><span class="preprocessor">[</span>update<span class="preprocessor">]</span><span class="markup">

Data Template

</span><span class="preprocessor">[</span>success<span class="preprocessor">]</span><span class="markup"> X MyISAM Indexes DT </span><span class="preprocessor">[</span>update<span class="preprocessor">]</span><span class="markup">

Graph Template

</span><span class="preprocessor">[</span>success<span class="preprocessor">]</span><span class="markup"> X InnoDB Buffer Pool GT </span><span class="preprocessor">[</span>update<span class="preprocessor">]</span><span class="markup">

Host Template

</span><span class="preprocessor">[</span>success<span class="preprocessor">]</span><span class="markup"> X MySQL Server HT </span><span class="preprocessor">[</span>update<span class="preprocessor">]</span><span class="markup">

添加设备

创建Graph。在Console选项卡下的左侧菜单栏中选择Devices，为要监控的主机新建一个Devices或选择已有Devices。在 Associated Graph Templates中添加想要监控MySQL状态的Graph Templates（如X MySQL Connections GT模板）。并点击最上面的Create Graphs for this Host链接，在Graph Templates的选择框中选择X MySQL Connections GT,然后点击Create按钮。然后Create Graphs for this Host。</span>
</code></pre><p>参考：</p>
<pre><code><span class="attribute">http</span>:<span class="comment">//faemalia.net/mysqlUtils/</span>

<span class="attribute">http</span>:<span class="comment">//forums.cacti.net/about6108.html</span>
</code></pre></div><footer class="post__foot u-cf"><a href="/2010/07/15/w/cacti-e7-9b-91-e6-8e-a7monitormysql-innodb-e6-95-b0-e6-8d-ae-e5-ba-93/#comments" class="post__foot-link u-fr">评论</a></footer></article><article class="post"><header class="post__head"><time datetime="2010-07-13T06:13:48.000Z" class="post__time">七月 13, 2010</time><h1 class="post__title"><a href="/2010/07/13/w/iptables-e5-8c-b9-e9-85-8d-e5-a4-9a-e4-b8-aa-e6-ba-90ip-e5-9c-b0-e5-9d-80/">iptables 匹配多个ip地址</a></h1></header><div class="post__main"><p>如果有一组目的ip不走squid透明代理，端口为3128，比如测试服务器、本地地址等，不需要cache，如何实现？</p>
<pre><code>/etc/sysconfig/iptables

*nat

:PREROUTING ACCEPT [<span class="number">0</span>:<span class="number">0</span>]

:POSTROUTING ACCEPT [<span class="number">0</span>:<span class="number">0</span>]

:OUTPUT ACCEPT [<span class="number">0</span>:<span class="number">0</span>]

-A PREROUTING -<span class="tag">i</span> eth0 -<span class="tag">p</span> tcp -m <span class="tag">mark</span> --<span class="tag">mark</span> <span class="number">0</span>x3 -m tcp --dport <span class="number">80</span> -j REDIRECT --to-ports <span class="number">3128</span>

-A POSTROUTING -s <span class="number">172.16</span>.<span class="number">8.0</span>/<span class="number">255.255</span>.<span class="number">254.0</span> -o eth1 -j SNAT --to-source <span class="number">123.127</span>.<span class="number">42.168</span>

COMMIT 

*mangle

:PREROUTING ACCEPT [<span class="number">0</span>:<span class="number">0</span>]

:INPUT ACCEPT [<span class="number">0</span>:<span class="number">0</span>]

:FORWARD ACCEPT [<span class="number">0</span>:<span class="number">0</span>]

:OUTPUT ACCEPT [<span class="number">0</span>:<span class="number">0</span>]

:POSTROUTING ACCEPT [<span class="number">0</span>:<span class="number">0</span>]

-A PREROUTING -d <span class="tag">a</span><span class="class">.b</span><span class="class">.c</span>.<span class="number">0</span>/<span class="number">255.255</span>.<span class="number">255.192</span> -j MARK --set-<span class="tag">mark</span> <span class="number">0</span>x2

-A PREROUTING -d <span class="tag">a</span><span class="class">.b</span><span class="class">.c</span>.<span class="number">0</span>/<span class="number">255.255</span>.<span class="number">255.192</span> -j RETURN

-A PREROUTING -d e<span class="class">.f</span><span class="class">.g</span>.<span class="number">128</span>/<span class="number">255.255</span>.<span class="number">255.192</span> -j MARK --set-<span class="tag">mark</span> <span class="number">0</span>x2

-A PREROUTING -d e<span class="class">.f</span><span class="class">.g</span>.<span class="number">128</span>/<span class="number">255.255</span>.<span class="number">255.192</span> -j RETURN

-A PREROUTING -d <span class="number">172.16</span>.<span class="number">8.0</span>/<span class="number">255.255</span>.<span class="number">254.0</span> -j MARK --set-<span class="tag">mark</span> <span class="number">0</span>x2

-A PREROUTING -d <span class="number">172.16</span>.<span class="number">8.0</span>/<span class="number">255.255</span>.<span class="number">254.0</span> -j RETURN

-A PREROUTING -<span class="tag">p</span> tcp -m tcp --dport <span class="number">80</span> -j MARK --set-<span class="tag">mark</span> <span class="number">0</span>x3

-A PREROUTING -<span class="tag">p</span> tcp -m tcp --dport <span class="number">80</span> -j RETURN

-A PREROUTING -<span class="tag">p</span> tcp -m tcp --dport <span class="number">443</span> -j MARK --set-<span class="tag">mark</span> <span class="number">0</span>x3

-A PREROUTING -<span class="tag">p</span> tcp -m tcp --dport <span class="number">443</span> -j RETURN

COMMIT

脚本：

<span class="variable">$IPTABLES</span> -t mangle -A PREROUTING -<span class="tag">p</span> udp -m udp --dport <span class="number">53</span> -j MARK --set-<span class="tag">mark</span> <span class="number">0</span>x1

<span class="variable">$IPTABLES</span> -t mangle -A PREROUTING -<span class="tag">p</span> udp -m udp --dport <span class="number">53</span> -j RETURN

<span class="variable">$IPTABLES</span> -t mangle -A PREROUTING -d <span class="tag">a</span><span class="class">.b</span><span class="class">.c</span>.<span class="number">0</span>/<span class="number">26</span> -j MARK --set-<span class="tag">mark</span> <span class="number">0</span>x2

<span class="variable">$IPTABLES</span> -t mangle -A PREROUTING -d <span class="tag">a</span><span class="class">.b</span><span class="class">.c</span>.<span class="number">0</span>/<span class="number">26</span> -j RETURN

<span class="variable">$IPTABLES</span> -t mangle -A PREROUTING -d e<span class="class">.f</span><span class="class">.g</span>.<span class="number">128</span>/<span class="number">26</span> -j MARK --set-<span class="tag">mark</span> <span class="number">0</span>x2

<span class="variable">$IPTABLES</span> -t mangle -A PREROUTING -d e<span class="class">.f</span><span class="class">.g</span>.<span class="number">128</span>/<span class="number">26</span> -j RETURN

<span class="variable">$IPTABLES</span> -t mangle -A PREROUTING -d <span class="number">172.16</span>.<span class="number">8.0</span>/<span class="number">23</span> -j MARK --set-<span class="tag">mark</span> <span class="number">0</span>x2

<span class="variable">$IPTABLES</span> -t mangle -A PREROUTING -d <span class="number">172.16</span>.<span class="number">8.0</span>/<span class="number">23</span> -j RETURN

<span class="variable">$IPTABLES</span> -t mangle -A PREROUTING -<span class="tag">p</span> tcp -m tcp --dport <span class="number">80</span> -j MARK --set-<span class="tag">mark</span> <span class="number">0</span>x3

<span class="variable">$IPTABLES</span> -t mangle -A PREROUTING -<span class="tag">p</span> tcp -m tcp --dport <span class="number">80</span> -j RETURN

<span class="variable">$IPTABLES</span> -t mangle -A PREROUTING -<span class="tag">p</span> tcp -m tcp --dport <span class="number">443</span> -j MARK --set-<span class="tag">mark</span> <span class="number">0</span>x3

<span class="variable">$IPTABLES</span> -t mangle -A PREROUTING -<span class="tag">p</span> tcp -m tcp --dport <span class="number">443</span> -j RETURN

<span class="variable">$IPTABLES</span> -t mangle -A PREROUTING -<span class="tag">p</span> udp -m udp -j MARK --set-<span class="tag">mark</span> <span class="number">0</span>x6

<span class="variable">$IPTABLES</span> -t mangle -A PREROUTING -<span class="tag">p</span> udp -m udp -j RETURN

<span class="variable">$IPTABLES</span> -t mangle -A PREROUTING -j MARK --set-<span class="tag">mark</span> <span class="number">0</span>x7

<span class="variable">$IPTABLES</span> -t mangle -A PREROUTING -j RETURN

<span class="variable">$IPTABLES</span> -t nat -A POSTROUTING -s <span class="number">172.16</span>.<span class="number">8.0</span>/<span class="number">23</span> -o <span class="variable">$INET_LINK</span> -j SNAT --to <span class="variable">$INET_IP</span>

<span class="variable">$IPTABLES</span> -t nat -A PREROUTING -<span class="tag">i</span> <span class="variable">$LAN_LINK</span> -<span class="tag">p</span> tcp -m <span class="tag">mark</span> --<span class="tag">mark</span> <span class="number">0</span>x3 -m tcp --dport <span class="number">80</span> -j REDIRECT --to-ports <span class="number">3128</span>
</code></pre></div><footer class="post__foot u-cf"><a href="/2010/07/13/w/iptables-e5-8c-b9-e9-85-8d-e5-a4-9a-e4-b8-aa-e6-ba-90ip-e5-9c-b0-e5-9d-80/#comments" class="post__foot-link u-fr">评论</a></footer></article></main><aside class="site-aside"><div class="widget about"><div class="b"><div class="info u-cf"><img src="/avatar.jpg"><div class="text"> <p>dayu graceful</p><p>vegan</p><p>linux sysadm</p><p> <a href="http://www.weibo.com/vegetablegrain" title="wiebo" class="weibo ico"></a><a href="http://user.qzone.qq.com/13467/main" title="qq" class="qq ico"></a></p></div></div></div></div><div class="widget tags"><div class="h">categories</div><div class="b"> <ul><li><a href="/categories/计算机/">计算机</a><small>(139)</small></li><li><a href="/categories/佛法传统文化/">佛法传统文化</a><small>(18)</small></li><li><a href="/categories/健康/">健康</a><small>(12)</small></li><li><a href="/categories/学习/">学习</a><small>(2)</small></li><li><a href="/categories/default/">default</a><small>(1)</small></li><li><a href="/categories/健康之道/">健康之道</a><small>(1)</small></li><li><a href="/categories/网络/">网络</a><small>(1)</small></li><li><a href="/categories/recreation/">recreation</a><small>(1)</small></li></ul></div></div><div class="widget links"><div class="h">links</div><div class="b"> <ul><li><a href="http://www.enzymesos.com/">酵素Enzyme救地球</a></li><li><a href="http://www.osalt.com/">商业软件的开源替代品</a></li></ul></div></div></aside></section><footer class="site-foot"><div class="inner"><div class="site-copy u-fl">© 2015 dayu<bdi> ❤ Theme by <a href="http://riny.net" target="_blank">Bubblings</a></bdi></div><menu class="page-menu u-fr"><li class="page-menu__item"><a title="Previous" href="/page/20/" class="page-menu__link icon-arrow-left">prev</a></li><li class="page-menu__item"><a title="Next" href="/page/22/" class="page-menu__link icon-arrow-right">next</a></li></menu></div></footer><div id="back-top" title="返回顶部"></div><script src="/js/script.js"></script></body></html>